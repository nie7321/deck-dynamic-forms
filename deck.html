<!DOCTYPE html><html lang="en-US"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,height=device-height,initial-scale=1.0"><meta name="apple-mobile-web-app-capable" content="yes"><meta http-equiv="X-UA-Compatible" content="ie=edge"><meta property="og:type" content="website"><meta name="twitter:card" content="summary"><style>@media screen{body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button,body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button,body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container button,body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container button{appearance:none;background-color:initial;border:0;color:inherit;cursor:pointer;font-size:inherit;opacity:.8;outline:none;padding:0;transition:opacity .2s linear;-webkit-tap-highlight-color:transparent}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button:disabled,body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button:disabled,body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container button:disabled,body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container button:disabled{cursor:not-allowed;opacity:.15!important}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button:hover,body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button:hover,body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container button:hover,body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container button:hover{opacity:1}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button:hover:active,body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button:hover:active,body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container button:hover:active,body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container button:hover:active{opacity:.6}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button:hover:not(:disabled),body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button:hover:not(:disabled),body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container button:hover:not(:disabled),body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container button:hover:not(:disabled){transition:none}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=prev],body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=prev],body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container button.bespoke-marp-presenter-info-page-prev{background:#0000 url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj48cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiNmZmYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSI1IiBkPSJNNjggOTAgMjggNTBsNDAtNDAiLz48L3N2Zz4=") no-repeat 50%;background-size:contain;overflow:hidden;text-indent:100%;white-space:nowrap}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=next],body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=next],body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container button.bespoke-marp-presenter-info-page-next{background:#0000 url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj48cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiNmZmYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSI1IiBkPSJtMzIgOTAgNDAtNDAtNDAtNDAiLz48L3N2Zz4=") no-repeat 50%;background-size:contain;overflow:hidden;text-indent:100%;white-space:nowrap}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=fullscreen],body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=fullscreen]{background:#0000 url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj48ZGVmcz48c3R5bGU+LmF7ZmlsbDpub25lO3N0cm9rZTojZmZmO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2Utd2lkdGg6NXB4fTwvc3R5bGU+PC9kZWZzPjxyZWN0IHdpZHRoPSI4MCIgaGVpZ2h0PSI2MCIgeD0iMTAiIHk9IjIwIiBjbGFzcz0iYSIgcng9IjUuNjciLz48cGF0aCBkPSJNNDAgNzBIMjBWNTBtMjAgMEwyMCA3MG00MC00MGgyMHYyMG0tMjAgMCAyMC0yMCIgY2xhc3M9ImEiLz48L3N2Zz4=") no-repeat 50%;background-size:contain;overflow:hidden;text-indent:100%;white-space:nowrap}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button.exit[data-bespoke-marp-osc=fullscreen],body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button.exit[data-bespoke-marp-osc=fullscreen]{background-image:url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj48ZGVmcz48c3R5bGU+LmF7ZmlsbDpub25lO3N0cm9rZTojZmZmO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2Utd2lkdGg6NXB4fTwvc3R5bGU+PC9kZWZzPjxyZWN0IHdpZHRoPSI4MCIgaGVpZ2h0PSI2MCIgeD0iMTAiIHk9IjIwIiBjbGFzcz0iYSIgcng9IjUuNjciLz48cGF0aCBkPSJNMjAgNTBoMjB2MjBtLTIwIDAgMjAtMjBtNDAgMEg2MFYzMG0yMCAwTDYwIDUwIiBjbGFzcz0iYSIvPjwvc3ZnPg==")}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=presenter],body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=presenter]{background:#0000 url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj48cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiNmZmYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSI1IiBkPSJNODcuOCA0Ny41Qzg5IDUwIDg3LjcgNTIgODUgNTJIMzVhOC43IDguNyAwIDAgMS03LjItNC41bC0xNS42LTMxQzExIDE0IDEyLjIgMTIgMTUgMTJoNTBhOC44IDguOCAwIDAgMSA3LjIgNC41ek02MCA1MnYzNm0tMTAgMGgyME00NSA0MmgyMCIvPjwvc3ZnPg==") no-repeat 50%;background-size:contain;overflow:hidden;text-indent:100%;white-space:nowrap}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container button.bespoke-marp-presenter-note-bigger{background:#0000 url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj48cGF0aCBzdHJva2U9IiNmZmYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSI1IiBkPSJNMTIgNTBoODBNNTIgOTBWMTAiLz48L3N2Zz4=") no-repeat 50%;background-size:contain;overflow:hidden;text-indent:100%;white-space:nowrap}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container button.bespoke-marp-presenter-note-smaller{background:#0000 url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj48cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiNmZmYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSI1IiBkPSJNMTIgNTBoODAiLz48L3N2Zz4=") no-repeat 50%;background-size:contain;overflow:hidden;text-indent:100%;white-space:nowrap}}@keyframes __bespoke_marp_transition_reduced_outgoing__{0%{opacity:1}to{opacity:0}}@keyframes __bespoke_marp_transition_reduced_incoming__{0%{mix-blend-mode:plus-lighter;opacity:0}to{mix-blend-mode:plus-lighter;opacity:1}}.bespoke-marp-note,.bespoke-marp-osc,.bespoke-progress-parent{display:none;transition:none}@media screen{::view-transition-group(*){animation-duration:var(--marp-bespoke-transition-animation-duration,.5s);animation-timing-function:ease}::view-transition-new(*),::view-transition-old(*){animation-delay:0s;animation-direction:var(--marp-bespoke-transition-animation-direction,normal);animation-duration:var(--marp-bespoke-transition-animation-duration,.5s);animation-fill-mode:both;animation-name:var(--marp-bespoke-transition-animation-name,var(--marp-bespoke-transition-animation-name-fallback,__bespoke_marp_transition_no_animation__));mix-blend-mode:normal}::view-transition-old(*){--marp-bespoke-transition-animation-name-fallback:__bespoke_marp_transition_reduced_outgoing__;animation-timing-function:ease}::view-transition-new(*){--marp-bespoke-transition-animation-name-fallback:__bespoke_marp_transition_reduced_incoming__;animation-timing-function:ease}::view-transition-new(root),::view-transition-old(root){animation-timing-function:linear}::view-transition-new(__bespoke_marp_transition_osc__),::view-transition-old(__bespoke_marp_transition_osc__){animation-duration:0s!important;animation-name:__bespoke_marp_transition_osc__!important}::view-transition-new(__bespoke_marp_transition_osc__){opacity:0!important}.bespoke-marp-transition-warming-up::view-transition-group(*),.bespoke-marp-transition-warming-up::view-transition-new(*),.bespoke-marp-transition-warming-up::view-transition-old(*){animation-play-state:paused!important}body,html{height:100%;margin:0}body{background:#000;overflow:hidden}svg.bespoke-marp-slide{content-visibility:hidden;opacity:0;pointer-events:none;z-index:-1}svg.bespoke-marp-slide:not(.bespoke-marp-active) *{view-transition-name:none!important}svg.bespoke-marp-slide.bespoke-marp-active{content-visibility:visible;opacity:1;pointer-events:auto;z-index:0}svg.bespoke-marp-slide.bespoke-marp-active.bespoke-marp-active-ready *{animation-name:__bespoke_marp__!important}@supports not (content-visibility:hidden){svg.bespoke-marp-slide[data-bespoke-marp-load=hideable]{display:none}svg.bespoke-marp-slide[data-bespoke-marp-load=hideable].bespoke-marp-active{display:block}}}@media screen and (prefers-reduced-motion:reduce){svg.bespoke-marp-slide *{view-transition-name:none!important}}@media screen{[data-bespoke-marp-fragment=inactive]{visibility:hidden}body[data-bespoke-view=""] .bespoke-marp-parent,body[data-bespoke-view=next] .bespoke-marp-parent{inset:0;position:absolute}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc,body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc{background:#000000a6;border-radius:7px;bottom:50px;color:#fff;contain:paint;display:block;font-family:Helvetica,Arial,sans-serif;font-size:16px;left:50%;line-height:0;opacity:1;padding:12px;position:absolute;touch-action:manipulation;transform:translateX(-50%);transition:opacity .2s linear;-webkit-user-select:none;user-select:none;white-space:nowrap;will-change:transform;z-index:1;view-transition-name:__bespoke_marp_transition_osc__}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>*,body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>*{margin-left:6px}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>:first-child,body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>:first-child{margin-left:0}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>span,body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>span{opacity:.8}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>span[data-bespoke-marp-osc=page],body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>span[data-bespoke-marp-osc=page]{display:inline-block;min-width:140px;text-align:center}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=fullscreen],body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=next],body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=presenter],body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=prev],body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=fullscreen],body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=next],body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=presenter],body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=prev]{height:32px;line-height:32px;width:32px}body[data-bespoke-view=""] .bespoke-marp-parent.bespoke-marp-inactive,body[data-bespoke-view=next] .bespoke-marp-parent.bespoke-marp-inactive{cursor:none}body[data-bespoke-view=""] .bespoke-marp-parent.bespoke-marp-inactive>.bespoke-marp-osc,body[data-bespoke-view=next] .bespoke-marp-parent.bespoke-marp-inactive>.bespoke-marp-osc{opacity:0;pointer-events:none}body[data-bespoke-view=""] svg.bespoke-marp-slide,body[data-bespoke-view=next] svg.bespoke-marp-slide{height:100%;left:0;position:absolute;top:0;width:100%}body[data-bespoke-view=""] .bespoke-progress-parent{background:#222;display:flex;height:5px;width:100%}body[data-bespoke-view=""] .bespoke-progress-parent+.bespoke-marp-parent{top:5px}body[data-bespoke-view=""] .bespoke-progress-parent .bespoke-progress-bar{background:#0288d1;flex:0 0 0;transition:flex-basis .2s cubic-bezier(0,1,1,1)}body[data-bespoke-view=next]{background:#0000}body[data-bespoke-view=presenter]{background:#161616}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container{display:grid;font-family:Helvetica,Arial,sans-serif;grid-template:"current dragbar next" minmax(140px,1fr) "current dragbar note" 2fr "info    dragbar note" 3em;grid-template-columns:minmax(3px,var(--bespoke-marp-presenter-split-ratio,66%)) 0 minmax(3px,1fr);height:100%;left:0;position:absolute;top:0;width:100%}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-parent{grid-area:current;overflow:hidden;position:relative}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-parent svg.bespoke-marp-slide{height:calc(100% - 40px);left:20px;pointer-events:none;position:absolute;top:20px;-webkit-user-select:none;user-select:none;width:calc(100% - 40px)}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-parent svg.bespoke-marp-slide.bespoke-marp-active{filter:drop-shadow(0 3px 10px rgba(0,0,0,.5))}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-dragbar-container{background:#0288d1;cursor:col-resize;grid-area:dragbar;margin-left:-3px;opacity:0;position:relative;transition:opacity .4s linear .1s;width:6px;z-index:10}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-dragbar-container:hover{opacity:1}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-dragbar-container.active{opacity:1;transition-delay:0s}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-next-container{background:#222;cursor:pointer;display:none;grid-area:next;overflow:hidden;position:relative}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-next-container.active{display:block}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-next-container iframe.bespoke-marp-presenter-next{background:#0000;border:0;display:block;filter:drop-shadow(0 3px 10px rgba(0,0,0,.5));height:calc(100% - 40px);left:20px;pointer-events:none;position:absolute;top:20px;-webkit-user-select:none;user-select:none;width:calc(100% - 40px)}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container{background:#222;color:#eee;grid-area:note;position:relative;z-index:1}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container button{height:1.5em;line-height:1.5em;width:1.5em}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container .bespoke-marp-presenter-note-wrapper{display:block;inset:0;position:absolute}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container .bespoke-marp-presenter-note-buttons{background:#000000a6;border-radius:4px;bottom:0;display:flex;gap:4px;margin:12px;opacity:0;padding:6px;pointer-events:none;position:absolute;right:0;transition:opacity .2s linear}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container .bespoke-marp-presenter-note-buttons:focus-within,body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container .bespoke-marp-presenter-note-wrapper:focus-within+.bespoke-marp-presenter-note-buttons,body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container:hover .bespoke-marp-presenter-note-buttons{opacity:1;pointer-events:auto}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container .bespoke-marp-note{box-sizing:border-box;font-size:calc(1.1em*var(--bespoke-marp-note-font-scale, 1));height:calc(100% - 40px);margin:20px;overflow:auto;padding-right:3px;white-space:pre-wrap;width:calc(100% - 40px);word-wrap:break-word;scrollbar-color:#eeeeee80 #0000;scrollbar-width:thin}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container .bespoke-marp-note::-webkit-scrollbar{width:6px}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container .bespoke-marp-note::-webkit-scrollbar-track{background:#0000}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container .bespoke-marp-note::-webkit-scrollbar-thumb{background:#eeeeee80;border-radius:6px}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container .bespoke-marp-note:empty{pointer-events:none}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container .bespoke-marp-note.active{display:block}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container .bespoke-marp-note p:first-child{margin-top:0}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container .bespoke-marp-note p:last-child{margin-bottom:0}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container{align-items:center;box-sizing:border-box;color:#eee;display:flex;flex-wrap:nowrap;grid-area:info;justify-content:center;overflow:hidden;padding:0 10px}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container .bespoke-marp-presenter-info-page,body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container .bespoke-marp-presenter-info-time,body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container .bespoke-marp-presenter-info-timer{box-sizing:border-box;display:block;padding:0 10px;white-space:nowrap;width:100%}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container button{height:1.5em;line-height:1.5em;width:1.5em}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container .bespoke-marp-presenter-info-page{order:2;text-align:center}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container .bespoke-marp-presenter-info-page .bespoke-marp-presenter-info-page-text{display:inline-block;min-width:120px;text-align:center}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container .bespoke-marp-presenter-info-time{color:#999;order:1;text-align:left}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container .bespoke-marp-presenter-info-timer{color:#999;order:3;text-align:right}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container .bespoke-marp-presenter-info-timer:hover{cursor:pointer}}@media print{.bespoke-marp-presenter-info-container,.bespoke-marp-presenter-next-container,.bespoke-marp-presenter-note-container{display:none}}</style><style>@charset "UTF-8";@import "https://fonts.bunny.net/css?family=Lato:400,900|Roboto+Mono:400,700&display=swap";div#\:\$p > svg > foreignObject > section{width:1280px;height:720px;box-sizing:border-box;overflow:hidden;position:relative;scroll-snap-align:center center;-webkit-text-size-adjust:100%;text-size-adjust:100%}div#\:\$p > svg > foreignObject > section::after{bottom:0;content:attr(data-marpit-pagination);padding:inherit;pointer-events:none;position:absolute;right:0}div#\:\$p > svg > foreignObject > section:not([data-marpit-pagination])::after{display:none}div#\:\$p > svg > foreignObject > section :is(h1, marp-h1){font-size:2em;margin:0.67em 0}div#\:\$p > svg > foreignObject > section video::-webkit-media-controls{will-change:transform}@page {size:1280px 720px;margin:0}@media print{html, body{background-color:#fff;margin:0;page-break-inside:avoid;break-inside:avoid-page}div#\:\$p > svg > foreignObject > section{page-break-before:always;break-before:page}div#\:\$p > svg > foreignObject > section, div#\:\$p > svg > foreignObject > section *{-webkit-print-color-adjust:exact!important;animation-delay:0s!important;animation-duration:0s!important;color-adjust:exact!important;transition:none!important}div#\:\$p > svg[data-marpit-svg]{display:block;height:100vh;width:100vw}}div#\:\$p > svg > foreignObject > :where(section){container-type:size}div#\:\$p > svg > foreignObject > section img[data-marp-twemoji]{background:transparent;height:1em;margin:0 .05em 0 .1em;vertical-align:-.1em;width:1em}/*!
 * Marp / Marpit Gaia theme.
 *
 * @theme gaia
 * @author Yuki Hattori
 *
 * @auto-scaling true
 * @size 16:9 1280px 720px
 * @size 4:3 960px 720px
 */div#\:\$p > svg > foreignObject > section :is(pre, marp-pre) code.hljs{display:block;overflow-x:auto;padding:1em}div#\:\$p > svg > foreignObject > section code.hljs{padding:3px 5px}div#\:\$p > svg > foreignObject > section .hljs{background:#000;color:#f8f8f8}div#\:\$p > svg > foreignObject > section .hljs-comment,div#\:\$p > svg > foreignObject > section .hljs-quote{color:#aeaeae;font-style:italic}div#\:\$p > svg > foreignObject > section .hljs-keyword,div#\:\$p > svg > foreignObject > section .hljs-selector-tag,div#\:\$p > svg > foreignObject > section .hljs-type{color:#e28964}div#\:\$p > svg > foreignObject > section .hljs-string{color:#65b042}div#\:\$p > svg > foreignObject > section .hljs-subst{color:#daefa3}div#\:\$p > svg > foreignObject > section .hljs-link,div#\:\$p > svg > foreignObject > section .hljs-regexp{color:#e9c062}div#\:\$p > svg > foreignObject > section .hljs-name,div#\:\$p > svg > foreignObject > section .hljs-section,div#\:\$p > svg > foreignObject > section .hljs-tag,div#\:\$p > svg > foreignObject > section .hljs-title{color:#89bdff}div#\:\$p > svg > foreignObject > section .hljs-class .hljs-title,div#\:\$p > svg > foreignObject > section .hljs-doctag,div#\:\$p > svg > foreignObject > section .hljs-title.class_{text-decoration:underline}div#\:\$p > svg > foreignObject > section .hljs-bullet,div#\:\$p > svg > foreignObject > section .hljs-number,div#\:\$p > svg > foreignObject > section .hljs-symbol{color:#3387cc}div#\:\$p > svg > foreignObject > section .hljs-params,div#\:\$p > svg > foreignObject > section .hljs-template-variable,div#\:\$p > svg > foreignObject > section .hljs-variable{color:#3e87e3}div#\:\$p > svg > foreignObject > section .hljs-attribute{color:#cda869}div#\:\$p > svg > foreignObject > section .hljs-meta{color:#8996a8}div#\:\$p > svg > foreignObject > section .hljs-formula{background-color:#0e2231;color:#f8f8f8;font-style:italic}div#\:\$p > svg > foreignObject > section .hljs-addition{background-color:#253b22;color:#f8f8f8}div#\:\$p > svg > foreignObject > section .hljs-deletion{background-color:#420e09;color:#f8f8f8}div#\:\$p > svg > foreignObject > section .hljs-selector-class{color:#9b703f}div#\:\$p > svg > foreignObject > section .hljs-selector-id{color:#8b98ab}div#\:\$p > svg > foreignObject > section .hljs-emphasis{font-style:italic}div#\:\$p > svg > foreignObject > section .hljs-strong{font-weight:700}div#\:\$p > svg > foreignObject > section :is(h1, marp-h1),div#\:\$p > svg > foreignObject > section :is(h2, marp-h2),div#\:\$p > svg > foreignObject > section :is(h3, marp-h3),div#\:\$p > svg > foreignObject > section :is(h4, marp-h4),div#\:\$p > svg > foreignObject > section :is(h5, marp-h5),div#\:\$p > svg > foreignObject > section :is(h6, marp-h6){margin:.5em 0 0}div#\:\$p > svg > foreignObject > section :is(h1, marp-h1) strong,div#\:\$p > svg > foreignObject > section :is(h2, marp-h2) strong,div#\:\$p > svg > foreignObject > section :is(h3, marp-h3) strong,div#\:\$p > svg > foreignObject > section :is(h4, marp-h4) strong,div#\:\$p > svg > foreignObject > section :is(h5, marp-h5) strong,div#\:\$p > svg > foreignObject > section :is(h6, marp-h6) strong{font-weight:inherit}div#\:\$p > svg > foreignObject > section :is(h1, marp-h1)::part(auto-scaling),div#\:\$p > svg > foreignObject > section :is(h2, marp-h2)::part(auto-scaling),div#\:\$p > svg > foreignObject > section :is(h3, marp-h3)::part(auto-scaling),div#\:\$p > svg > foreignObject > section :is(h4, marp-h4)::part(auto-scaling),div#\:\$p > svg > foreignObject > section :is(h5, marp-h5)::part(auto-scaling),div#\:\$p > svg > foreignObject > section :is(h6, marp-h6)::part(auto-scaling){max-height:580px}div#\:\$p > svg > foreignObject > section :is(h1, marp-h1){font-size:1.8em}div#\:\$p > svg > foreignObject > section :is(h2, marp-h2){font-size:1.5em}div#\:\$p > svg > foreignObject > section :is(h3, marp-h3){font-size:1.3em}div#\:\$p > svg > foreignObject > section :is(h4, marp-h4){font-size:1.1em}div#\:\$p > svg > foreignObject > section :is(h5, marp-h5){font-size:1em}div#\:\$p > svg > foreignObject > section :is(h6, marp-h6){font-size:.9em}div#\:\$p > svg > foreignObject > section blockquote,div#\:\$p > svg > foreignObject > section p{margin:1em 0 0}div#\:\$p > svg > foreignObject > section ol>li,div#\:\$p > svg > foreignObject > section ul>li{margin:.3em 0 0}div#\:\$p > svg > foreignObject > section ol>li>p,div#\:\$p > svg > foreignObject > section ul>li>p{margin:.6em 0 0}div#\:\$p > svg > foreignObject > section code{display:inline-block;font-family:Roboto Mono,monospace;font-size:.8em;letter-spacing:0;margin:-.1em .15em;padding:.1em .2em;vertical-align:baseline}div#\:\$p > svg > foreignObject > section :is(pre, marp-pre){display:block;margin:1em 0 0;overflow:visible}div#\:\$p > svg > foreignObject > section :is(pre, marp-pre) code{box-sizing:border-box;font-size:.7em;margin:0;min-width:100%;padding:.5em}div#\:\$p > svg > foreignObject > section :is(pre, marp-pre)::part(auto-scaling){max-height:calc(580px - 1em)}div#\:\$p > svg > foreignObject > section blockquote{margin:1em 0 0;padding:0 1em;position:relative}div#\:\$p > svg > foreignObject > section blockquote:after,div#\:\$p > svg > foreignObject > section blockquote:before{content:"â€œ";display:block;font-family:Times New Roman,serif;font-weight:700;position:absolute}div#\:\$p > svg > foreignObject > section blockquote:before{left:0;top:0}div#\:\$p > svg > foreignObject > section blockquote:after{bottom:0;right:0;transform:rotate(180deg)}div#\:\$p > svg > foreignObject > section blockquote>:first-child{margin-top:0}div#\:\$p > svg > foreignObject > section mark{background:transparent}div#\:\$p > svg > foreignObject > section table{border-collapse:collapse;border-spacing:0;margin:1em 0 0}div#\:\$p > svg > foreignObject > section table td,div#\:\$p > svg > foreignObject > section table th{border-style:solid;border-width:1px;padding:.2em .4em}div#\:\$p > svg > foreignObject > section footer,div#\:\$p > svg > foreignObject > section header,div#\:\$p > svg > foreignObject > section:after{box-sizing:border-box;font-size:66%;height:70px;line-height:50px;overflow:hidden;padding:10px 25px;position:absolute}div#\:\$p > svg > foreignObject > section:after{--marpit-root-font-size:66%;}div#\:\$p > svg > foreignObject > section header{top:0}div#\:\$p > svg > foreignObject > section footer,div#\:\$p > svg > foreignObject > section header{left:0;right:0}div#\:\$p > svg > foreignObject > section footer{bottom:0}div#\:\$p > svg > foreignObject > section{background-color:var(--color-background);background-image:linear-gradient(135deg, hsla(0,0%,53%,0), hsla(0,0%,53%,.02) 50%, hsla(0,0%,100%,0) 0, hsla(0,0%,100%,.05));color:var(--color-foreground);font-family:Lato,Avenir Next,Avenir,Trebuchet MS,Segoe UI,sans-serif;font-size:35px;height:720px;letter-spacing:1.25px;line-height:1.35;padding:70px;width:1280px;word-wrap:break-word;--color-background:#fff8e1;--color-background-stripe:rgba(69,90,100,.1);--color-foreground:#455a64;--color-dimmed:#6a7a7d;--color-highlight:#0288d1;}div#\:\$p > svg > foreignObject > section{--marpit-root-font-size:35px;}div#\:\$p > svg > foreignObject > section:after{bottom:0;font-size:80%;right:0}div#\:\$p > svg > foreignObject > section:after{--marpit-root-font-size:80%;}div#\:\$p > svg > foreignObject > section a,div#\:\$p > svg > foreignObject > section mark{color:var(--color-highlight)}div#\:\$p > svg > foreignObject > section code{background:var(--color-dimmed);color:var(--color-background)}div#\:\$p > svg > foreignObject > section :is(h1, marp-h1) strong,div#\:\$p > svg > foreignObject > section :is(h2, marp-h2) strong,div#\:\$p > svg > foreignObject > section :is(h3, marp-h3) strong,div#\:\$p > svg > foreignObject > section :is(h4, marp-h4) strong,div#\:\$p > svg > foreignObject > section :is(h5, marp-h5) strong,div#\:\$p > svg > foreignObject > section :is(h6, marp-h6) strong{color:var(--color-highlight)}div#\:\$p > svg > foreignObject > section :is(pre, marp-pre){background:var(--color-foreground)}div#\:\$p > svg > foreignObject > section :is(pre, marp-pre)>code{background:transparent}div#\:\$p > svg > foreignObject > section blockquote:after,div#\:\$p > svg > foreignObject > section blockquote:before,div#\:\$p > svg > foreignObject > section footer,div#\:\$p > svg > foreignObject > section header,div#\:\$p > svg > foreignObject > section section:after{color:var(--color-dimmed)}div#\:\$p > svg > foreignObject > section table td,div#\:\$p > svg > foreignObject > section table th{border-color:var(--color-foreground)}div#\:\$p > svg > foreignObject > section table thead th{background:var(--color-foreground);color:var(--color-background)}div#\:\$p > svg > foreignObject > section table tbody>tr:nth-child(odd) td,div#\:\$p > svg > foreignObject > section table tbody>tr:nth-child(odd) th{background:var(--color-background-stripe, transparent)}div#\:\$p > svg > foreignObject > section>:first-child,div#\:\$p > svg > foreignObject > section>header:first-child+*{margin-top:0}div#\:\$p > svg > foreignObject > section:where(.invert){--color-background:#455a64;--color-background-stripe:rgba(255,248,225,.1);--color-foreground:#fff8e1;--color-dimmed:#dad8c8;--color-highlight:#81d4fa;}div#\:\$p > svg > foreignObject > section:where(.gaia){--color-background:#0288d1;--color-background-stripe:rgba(255,248,225,.1);--color-foreground:#fff8e1;--color-dimmed:#cce2de;--color-highlight:#81d4fa;}div#\:\$p > svg > foreignObject > section:where(.lead){align-items:stretch;flex-flow:column nowrap;place-content:safe center center}div#\:\$p > svg > foreignObject > section:where(.lead) :is(h1, marp-h1),div#\:\$p > svg > foreignObject > section:where(.lead) :is(h2, marp-h2),div#\:\$p > svg > foreignObject > section:where(.lead) :is(h3, marp-h3),div#\:\$p > svg > foreignObject > section:where(.lead) :is(h4, marp-h4),div#\:\$p > svg > foreignObject > section:where(.lead) :is(h5, marp-h5),div#\:\$p > svg > foreignObject > section:where(.lead) :is(h6, marp-h6){text-align:center}div#\:\$p > svg > foreignObject > section:where(.lead) p{text-align:center}div#\:\$p > svg > foreignObject > section:where(.lead) blockquote>:is(h1, marp-h1),div#\:\$p > svg > foreignObject > section:where(.lead) blockquote>:is(h2, marp-h2),div#\:\$p > svg > foreignObject > section:where(.lead) blockquote>:is(h3, marp-h3),div#\:\$p > svg > foreignObject > section:where(.lead) blockquote>:is(h4, marp-h4),div#\:\$p > svg > foreignObject > section:where(.lead) blockquote>:is(h5, marp-h5),div#\:\$p > svg > foreignObject > section:where(.lead) blockquote>:is(h6, marp-h6),div#\:\$p > svg > foreignObject > section:where(.lead) blockquote>p{text-align:left}div#\:\$p > svg > foreignObject > section:where(.lead) ol>li>p,div#\:\$p > svg > foreignObject > section:where(.lead) ul>li>p{text-align:left}div#\:\$p > svg > foreignObject > section:where(.lead) table{margin-left:auto;margin-right:auto}div#\:\$p > svg > foreignObject > section[data-marpit-advanced-background="background"]{columns:initial!important;display:block!important;padding:0!important}div#\:\$p > svg > foreignObject > section[data-marpit-advanced-background="background"]::before, div#\:\$p > svg > foreignObject > section[data-marpit-advanced-background="background"]::after, div#\:\$p > svg > foreignObject > section[data-marpit-advanced-background="content"]::before, div#\:\$p > svg > foreignObject > section[data-marpit-advanced-background="content"]::after{display:none!important}div#\:\$p > svg > foreignObject > section[data-marpit-advanced-background="background"] > div[data-marpit-advanced-background-container]{all:initial;display:flex;flex-direction:row;height:100%;overflow:hidden;width:100%}div#\:\$p > svg > foreignObject > section[data-marpit-advanced-background="background"] > div[data-marpit-advanced-background-container][data-marpit-advanced-background-direction="vertical"]{flex-direction:column}div#\:\$p > svg > foreignObject > section[data-marpit-advanced-background="background"][data-marpit-advanced-background-split] > div[data-marpit-advanced-background-container]{width:var(--marpit-advanced-background-split, 50%)}div#\:\$p > svg > foreignObject > section[data-marpit-advanced-background="background"][data-marpit-advanced-background-split="right"] > div[data-marpit-advanced-background-container]{margin-left:calc(100% - var(--marpit-advanced-background-split, 50%))}div#\:\$p > svg > foreignObject > section[data-marpit-advanced-background="background"] > div[data-marpit-advanced-background-container] > figure{all:initial;background-position:center;background-repeat:no-repeat;background-size:cover;flex:auto;margin:0}div#\:\$p > svg > foreignObject > section[data-marpit-advanced-background="background"] > div[data-marpit-advanced-background-container] > figure > figcaption{position:absolute;border:0;clip:rect(0, 0, 0, 0);height:1px;margin:-1px;overflow:hidden;padding:0;white-space:nowrap;width:1px}div#\:\$p > svg > foreignObject > section[data-marpit-advanced-background="content"], div#\:\$p > svg > foreignObject > section[data-marpit-advanced-background="pseudo"]{background:transparent!important}div#\:\$p > svg > foreignObject > section[data-marpit-advanced-background="pseudo"], div#\:\$p > svg[data-marpit-svg] > foreignObject[data-marpit-advanced-background="pseudo"]{pointer-events:none!important}div#\:\$p > svg > foreignObject > section[data-marpit-advanced-background-split]{width:100%;height:100%}
</style></head><body><div class="bespoke-marp-osc"><button data-bespoke-marp-osc="prev" tabindex="-1" title="Previous slide">Previous slide</button><span data-bespoke-marp-osc="page"></span><button data-bespoke-marp-osc="next" tabindex="-1" title="Next slide">Next slide</button><button data-bespoke-marp-osc="fullscreen" tabindex="-1" title="Toggle fullscreen (f)">Toggle fullscreen</button><button data-bespoke-marp-osc="presenter" tabindex="-1" title="Open presenter view (p)">Open presenter view</button></div><div id=":$p"><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section data-background-color="#E4E0EE" data-class="lead" data-theme="gaia" lang="en-US" class="lead" style="--background-color:#E4E0EE;--class:lead;--theme:gaia;background-color:#E4E0EE;background-image:none;" data-marpit-advanced-background="background"><div data-marpit-advanced-background-container="true" data-marpit-advanced-background-direction="horizontal"><figure style="background-image:url(&quot;./assets/weber-arch.jpg&quot;);filter:opacity(.25);"></figure></div></section></foreignObject><foreignObject width="1280" height="720"><section id="1" data-background-color="#E4E0EE" data-class="lead" data-theme="gaia" lang="en-US" class="lead" style="--background-color:#E4E0EE;--class:lead;--theme:gaia;background-color:#E4E0EE;background-image:none;" data-marpit-advanced-background="content">
<h1 id="solving-a-perennial-problem">Solving a Perennial Problem</h1>
<h4 id="with-dynamic-forms-for-laravel">with Dynamic Forms for Laravel</h4>
<p>Presented by Nick Evans<br />
<small>Lead Solution Architect @ NUIT</small></p>
</section>
</foreignObject><foreignObject width="1280" height="720" data-marpit-advanced-background="pseudo"><section data-background-color="#E4E0EE" data-class="lead" data-theme="gaia" lang="en-US" class="lead" style="" data-marpit-advanced-background="pseudo"></section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section data-paginate="true" data-background-color="#E4E0EE" data-theme="gaia" lang="en-US" data-marpit-pagination="2" style="--paginate:true;--background-color:#E4E0EE;--theme:gaia;background-color:#E4E0EE;background-image:none;--marpit-advanced-background-split:50%;" data-marpit-pagination-total="41" data-marpit-advanced-background="background" data-marpit-advanced-background-split="left"><div data-marpit-advanced-background-container="true" data-marpit-advanced-background-direction="horizontal"><figure style="background-image:url(&quot;./assets/soap-workflow.PNG&quot;);"></figure></div></section></foreignObject><foreignObject width="50%" height="720" x="50%"><section id="2" data-paginate="true" data-background-color="#E4E0EE" data-theme="gaia" lang="en-US" data-marpit-pagination="2" style="--paginate:true;--background-color:#E4E0EE;--theme:gaia;background-color:#E4E0EE;background-image:none;--marpit-advanced-background-split:50%;" data-marpit-pagination-total="41" data-marpit-advanced-background="content" data-marpit-advanced-background-split="left">
<h1 id="goal">Goal</h1>
<ul>
<li>We did a cool thing</li>
<li>I'm going to tell you about the cool thing</li>
<li>Some of it is open source</li>
</ul>
<p><strong>Feel free to ask questions as you have them!</strong></p>
</section>
</foreignObject><foreignObject width="1280" height="720" data-marpit-advanced-background="pseudo"><section data-paginate="true" data-background-color="#E4E0EE" data-theme="gaia" lang="en-US" data-marpit-pagination="2" style="" data-marpit-pagination-total="41" data-marpit-advanced-background="pseudo" data-marpit-advanced-background-split="left"></section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="3" data-paginate="true" data-background-color="#E4E0EE" data-theme="gaia" lang="en-US" data-marpit-pagination="3" style="--paginate:true;--background-color:#E4E0EE;--theme:gaia;background-color:#E4E0EE;background-image:none;" data-marpit-pagination-total="41">
<h1 id="problem">Problem</h1>
<ul>
<li>We have lots of forms in our app</li>
<li>Users always changes to forms
<ul>
<li>New instructions</li>
<li>Change the validations</li>
<li>New fields</li>
<li>Update a dropdown</li>
<li>Whole new forms!</li>
</ul>
</li>
</ul>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="4" data-paginate="true" data-background-color="#E4E0EE" data-theme="gaia" lang="en-US" data-marpit-pagination="4" style="--paginate:true;--background-color:#E4E0EE;--theme:gaia;background-color:#E4E0EE;background-image:none;" data-marpit-pagination-total="41">
<h1 id="case-study-soap">Case Study: SOAP</h1>
<ul>
<li>
<p>Originally: Undergraduate Research Grants</p>
<ul>
<li>24 grant application forms &amp; workflows</li>
<li>All <em>artisanially hand-crafted</em> ...</li>
</ul>
</li>
<li>
<p>Goal: Student Opportunity Application Portal</p>
<ul>
<li>Self-service form setup for any step</li>
<li>Like using SurveyMonkey/Qualtrics</li>
</ul>
</li>
</ul>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="5" data-paginate="true" data-background-color="#E4E0EE" data-theme="gaia" lang="en-US" data-marpit-pagination="5" style="--paginate:true;--background-color:#E4E0EE;--theme:gaia;background-color:#E4E0EE;background-image:none;" data-marpit-pagination-total="41">
<h1 id="solutions">Solutions?</h1>
<ul>
<li>3rd-party low-code tools for self-service?
<ul>
<li>OnBase</li>
<li>PerfectForms</li>
<li>Google Form &amp; Spreadsheet</li>
<li>Microsoft Forms + Power Automate</li>
</ul>
</li>
</ul>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="6" data-paginate="true" data-background-color="#E4E0EE" data-theme="gaia" lang="en-US" data-marpit-pagination="6" style="--paginate:true;--background-color:#E4E0EE;--theme:gaia;background-color:#E4E0EE;background-image:none;" data-marpit-pagination-total="41">
<h1 id="but">But...</h1>
<ul>
<li>Probably need data in <strong>your</strong> app, not 3rd party tool</li>
<li>Low-code tools often hard to extend, e.g.
<ul>
<li>Need a NetID lookup field</li>
<li>Or CAESAR term code dropdown</li>
<li>etc...</li>
</ul>
</li>
</ul>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section data-paginate="true" data-background-color="#E4E0EE" data-theme="gaia" lang="en-US" data-marpit-pagination="7" style="--paginate:true;--background-color:#E4E0EE;--theme:gaia;background-color:#E4E0EE;background-image:none;--marpit-advanced-background-split:50%;" data-marpit-pagination-total="41" data-marpit-advanced-background="background" data-marpit-advanced-background-split="right"><div data-marpit-advanced-background-container="true" data-marpit-advanced-background-direction="horizontal"><figure style="background-image:url(&quot;./assets/formio-marketing.PNG&quot;);"></figure></div></section></foreignObject><foreignObject width="50%" height="720"><section id="7" data-paginate="true" data-background-color="#E4E0EE" data-theme="gaia" lang="en-US" data-marpit-pagination="7" style="--paginate:true;--background-color:#E4E0EE;--theme:gaia;background-color:#E4E0EE;background-image:none;--marpit-advanced-background-split:50%;" data-marpit-pagination-total="41" data-marpit-advanced-background="content" data-marpit-advanced-background-split="right">
<h1 id="formio">Form.io</h1>
<ul>
<li>SaaS company for low-code custom forms
<ul>
<li>Everything is managed</li>
<li>Same problem as other 3rd party tools</li>
</ul>
</li>
<li><strong>But</strong>: everything is MIT licensed
<ul>
<li>Form builder + renderer</li>
<li>Backend</li>
</ul>
</li>
</ul>
</section>
</foreignObject><foreignObject width="1280" height="720" data-marpit-advanced-background="pseudo"><section data-paginate="true" data-background-color="#E4E0EE" data-theme="gaia" lang="en-US" data-marpit-pagination="7" style="" data-marpit-pagination-total="41" data-marpit-advanced-background="pseudo" data-marpit-advanced-background-split="right"></section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="8" data-paginate="true" data-background-color="#E4E0EE" data-theme="gaia" lang="en-US" data-marpit-pagination="8" style="--paginate:true;--background-color:#E4E0EE;--theme:gaia;background-color:#E4E0EE;background-image:none;" data-marpit-pagination-total="41">
<h1 id="capabilities">Capabilities</h1>
<ul>
<li>File uploads</li>
<li>Conditional fields</li>
<li>Rich text editor, richer dropdowns</li>
<li>Resources
<ul>
<li>Dropdowns options w/ server-side collections, managed any way you like</li>
<li>Usable by any form</li>
</ul>
</li>
<li>Calculated values &amp; advanced logic via JSON Logic</li>
</ul>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="9" data-paginate="true" data-background-color="#E4E0EE" data-theme="gaia" lang="en-US" data-marpit-pagination="9" style="--paginate:true;--background-color:#E4E0EE;--theme:gaia;background-color:#E4E0EE;background-image:none;" data-marpit-pagination-total="41">
<p><video controls="controls" style="width: 100%" autoplay src="./assets/builder_demo.webm"></video></p>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="10" data-paginate="true" data-background-color="#E4E0EE" data-theme="gaia" lang="en-US" data-marpit-pagination="10" style="--paginate:true;--background-color:#E4E0EE;--theme:gaia;background-color:#E4E0EE;background-image:none;" data-marpit-pagination-total="41">
<h1 id="form-builder-output">Form Builder Output</h1>
<pre is="marp-pre" data-auto-scaling="downscale-only"><code class="language-json"><span class="hljs-punctuation">{</span>
    <span class="hljs-attr">&quot;components&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
        <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">&quot;label&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;First Name&quot;</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">&quot;key&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;firstName&quot;</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;textfield&quot;</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">&quot;input&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span>
        <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;button&quot;</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">&quot;label&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Submit&quot;</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">&quot;key&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;submit&quot;</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">&quot;disableOnInvalid&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">&quot;input&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
        <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="11" data-paginate="true" data-background-color="#E4E0EE" data-theme="gaia" lang="en-US" data-marpit-pagination="11" style="--paginate:true;--background-color:#E4E0EE;--theme:gaia;background-color:#E4E0EE;background-image:none;" data-marpit-pagination-total="41">
<h1 id="submissions">Submissions</h1>
<pre is="marp-pre" data-auto-scaling="downscale-only"><code class="language-js"><span class="hljs-keyword">const</span> formSchema = { <span class="hljs-comment">/* the JSON from the last slide */</span> };

<span class="hljs-keyword">const</span> formContainer = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;formio-form&#x27;</span>);
<span class="hljs-keyword">const</span> editForm = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Formio</span>.<span class="hljs-title function_">createForm</span>(formContainer, formSchema);

<span class="hljs-comment">// This is the previous submission data (e.g. edit a draft)</span>
<span class="hljs-comment">// Or just leave it out if it&#x27;s a brand-new form!</span>
editForm.<span class="hljs-property">submission</span> = {
    <span class="hljs-attr">data</span>: {
        <span class="hljs-attr">firstName</span>: <span class="hljs-string">&quot;Flat Dallas&quot;</span>,
    }
};
</code></pre>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="12" data-paginate="true" data-background-color="#E4E0EE" data-theme="gaia" lang="en-US" data-marpit-pagination="12" style="--paginate:true;--background-color:#E4E0EE;--theme:gaia;background-color:#E4E0EE;background-image:none;" data-marpit-pagination-total="41">
<h1 id="backend">Backend</h1>
<ul>
<li>Frontend libraries are great</li>
<li>But, need to validate form data server-side
<ul>
<li>Option A: Run Formio backend NodeJS app + Mongo</li>
<li>Option B: Implement a backend in PHP</li>
</ul>
</li>
</ul>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="13" data-paginate="true" data-background-color="#E4E0EE" data-theme="gaia" lang="en-US" data-marpit-pagination="13" style="--paginate:true;--background-color:#E4E0EE;--theme:gaia;background-color:#E4E0EE;background-image:none;" data-marpit-pagination-total="41">
<h1 id="option-a-run-formio-backend">Option A: Run Formio Backend</h1>
<p><img src="./assets/run-formio.png" alt="" /></p>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="14" data-paginate="true" data-background-color="#E4E0EE" data-theme="gaia" lang="en-US" data-marpit-pagination="14" style="--paginate:true;--background-color:#E4E0EE;--theme:gaia;background-color:#E4E0EE;background-image:none;" data-marpit-pagination-total="41">
<h1 id="option-b-php-adapter">Option B: PHP Adapter</h1>
<pre is="marp-pre" data-auto-scaling="downscale-only"><code class="language-php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FormController</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Controller</span>
</span>{    
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">store</span>(<span class="hljs-params">Request <span class="hljs-variable">$request</span></span>)
    </span>{
        <span class="hljs-keyword">if</span> (<span class="hljs-variable">$request</span>-&gt;<span class="hljs-title function_ invoke__">get</span>(<span class="hljs-string">&#x27;state&#x27;</span>) === <span class="hljs-string">&#x27;draft&#x27;</span>) {
            <span class="hljs-comment">// Save w/out validating ...</span>
        }
    
        <span class="hljs-variable">$data</span> = <span class="hljs-variable">$request</span>-&gt;<span class="hljs-title function_ invoke__">validateDynamicForm</span>(
            <span class="hljs-title class_">FormDefinition</span>::<span class="hljs-title function_ invoke__">find</span>(...)-&gt;json,
            <span class="hljs-variable">$request</span>-&gt;<span class="hljs-title function_ invoke__">get</span>(<span class="hljs-string">&#x27;submissionValues&#x27;</span>)
        );
        
        <span class="hljs-title function_ invoke__">dump</span>(<span class="hljs-variable">$data</span>); <span class="hljs-comment">// Validated form data!</span>
    }
}
</code></pre>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section data-paginate="true" data-background-color="#E4E0EE" data-theme="gaia" lang="en-US" data-marpit-pagination="15" style="--paginate:true;--background-color:#E4E0EE;--theme:gaia;background-color:#E4E0EE;background-image:none;--marpit-advanced-background-split:50%;" data-marpit-pagination-total="41" data-marpit-advanced-background="background" data-marpit-advanced-background-split="right"><div data-marpit-advanced-background-container="true" data-marpit-advanced-background-direction="horizontal"><figure style="background-image:url(&quot;./assets/docs-qr.png&quot;);background-size:90%;"></figure></div></section></foreignObject><foreignObject width="50%" height="720"><section id="15" data-paginate="true" data-background-color="#E4E0EE" data-theme="gaia" lang="en-US" data-marpit-pagination="15" style="--paginate:true;--background-color:#E4E0EE;--theme:gaia;background-color:#E4E0EE;background-image:none;--marpit-advanced-background-split:50%;" data-marpit-pagination-total="41" data-marpit-advanced-background="content" data-marpit-advanced-background-split="right">
<h1 id="wait-this-is-a-library">Wait, this is a library?!?</h1>
<pre is="marp-pre" data-auto-scaling="downscale-only"><code class="language-sh">composer require northwestern-sysdev/dynamic-forms 

php artisan dynamic-forms:install

yarn install &amp;&amp; yarn build
</code></pre>
</section>
</foreignObject><foreignObject width="1280" height="720" data-marpit-advanced-background="pseudo"><section data-paginate="true" data-background-color="#E4E0EE" data-theme="gaia" lang="en-US" data-marpit-pagination="15" style="" data-marpit-pagination-total="41" data-marpit-advanced-background="pseudo" data-marpit-advanced-background-split="right"></section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section data-background-color="#E4E0EE" data-class="lead" data-theme="gaia" lang="en-US" class="lead" style="--background-color:#E4E0EE;--class:lead;--theme:gaia;background-color:#E4E0EE;background-image:none;" data-marpit-advanced-background="background"><div data-marpit-advanced-background-container="true" data-marpit-advanced-background-direction="horizontal"><figure style="background-image:url(&quot;./assets/weber-arch.jpg&quot;);filter:opacity(.25);"></figure></div></section></foreignObject><foreignObject width="1280" height="720"><section id="16" data-background-color="#E4E0EE" data-class="lead" data-theme="gaia" lang="en-US" class="lead" style="--background-color:#E4E0EE;--class:lead;--theme:gaia;background-color:#E4E0EE;background-image:none;" data-marpit-advanced-background="content">
<h1 id="implementation">Implementation</h1>
</section>
</foreignObject><foreignObject width="1280" height="720" data-marpit-advanced-background="pseudo"><section data-background-color="#E4E0EE" data-class="lead" data-theme="gaia" lang="en-US" class="lead" style="" data-marpit-advanced-background="pseudo"></section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="17" data-paginate="true" data-background-color="#E4E0EE" data-theme="gaia" lang="en-US" data-marpit-pagination="17" style="--paginate:true;--background-color:#E4E0EE;--theme:gaia;background-color:#E4E0EE;background-image:none;" data-marpit-pagination-total="41">
<h1 id="challenges">Challenges</h1>
<ol>
<li>Extending Formio with Northwestern's field types</li>
<li>Customizing File Uploads</li>
<li>Storing &amp; querying this data</li>
<li>Using the data for emails</li>
<li>Complex validations &amp; calculated values</li>
</ol>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="18" data-paginate="true" data-background-color="#E4E0EE" data-theme="gaia" lang="en-US" data-marpit-pagination="18" style="--paginate:true;--background-color:#E4E0EE;--theme:gaia;background-color:#E4E0EE;background-image:none;" data-marpit-pagination-total="41">
<h1 id="tech-extending-formio">Tech: Extending Formio</h1>
<ul>
<li>
<p>Students pick a faculty sponsor for their project</p>
<ul>
<li>So we need something people can include in a form to collect an NU user</li>
</ul>
</li>
<li>
<p>Call Directory Search API &amp; validate if user exists</p>
</li>
<li>
<p>Optional validation for affiliations (e.g. only accept faculy)</p>
</li>
<li>
<p>~750 LoC, lots of boilerplate, based on <code>Address</code></p>
</li>
<li>
<p>Use Formio to define form for builder settings</p>
</li>
<li>
<p>Implement corresponding server-side validations</p>
</li>
</ul>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="19" data-paginate="true" data-background-color="#E4E0EE" data-theme="gaia" lang="en-US" data-marpit-pagination="19" style="--paginate:true;--background-color:#E4E0EE;--theme:gaia;background-color:#E4E0EE;background-image:none;" data-marpit-pagination-total="41">
<h1 id="extending-formio-cont">Extending Formio (cont)</h1>
<p><img src="./assets/nu-directory-settings.png" alt="" /></p>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="20" data-paginate="true" data-background-color="#E4E0EE" data-theme="gaia" lang="en-US" data-marpit-pagination="20" style="--paginate:true;--background-color:#E4E0EE;--theme:gaia;background-color:#E4E0EE;background-image:none;" data-marpit-pagination-total="41">
<h1 id="tech-customizing-file-uploads">Tech: Customizing File Uploads</h1>
<ul>
<li>Common to upload a PDF with a grant proposal PDF</li>
<li>But it looks like this ...</li>
</ul>
<p><img src="./assets/file-upload.png" alt="" /></p>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="21" data-paginate="true" data-background-color="#E4E0EE" data-theme="gaia" lang="en-US" data-marpit-pagination="21" style="--paginate:true;--background-color:#E4E0EE;--theme:gaia;background-color:#E4E0EE;background-image:none;" data-marpit-pagination-total="41">
<h1 id="tech-customizing-file-uploads-1">Tech: Customizing File Uploads</h1>
<pre is="marp-pre" data-auto-scaling="downscale-only"><code class="language-html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript">
<span class="hljs-keyword">const</span> inlineViewableFiles = [];
ctx.<span class="hljs-property">files</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">file</span>) {
    <span class="hljs-keyword">if</span> (file.<span class="hljs-property">type</span> === <span class="hljs-string">&#x27;application/pdf&#x27;</span>) {
        <span class="hljs-keyword">return</span> inlineViewableFiles.<span class="hljs-title function_">push</span>(file);
    }
});
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

{% if (ctx.disabled) { %}
<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;d-print-none&quot;</span>&gt;</span>
    {% inlineViewableFiles.forEach(function(file) { %}
    <span class="hljs-tag">&lt;<span class="hljs-name">object</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;application/pdf&quot;</span> 
        <span class="hljs-attr">data</span>=<span class="hljs-string">&quot;{{ file.url }}?displayObject=1#view=FitH&quot;</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>There was a problem displaying the PDF.<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">object</span>&gt;</span>
    {% }) %}
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
{% } %}
</code></pre>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="22" data-paginate="true" data-background-color="#E4E0EE" data-theme="gaia" lang="en-US" data-marpit-pagination="22" style="--paginate:true;--background-color:#E4E0EE;--theme:gaia;background-color:#E4E0EE;background-image:none;" data-marpit-pagination-total="41">
<h1 id="tech-customizing-file-uploads-2">Tech: Customizing File Uploads</h1>
<p><img src="./assets/inline-pdf.png" alt="" /></p>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="23" data-paginate="true" data-background-color="#E4E0EE" data-theme="gaia" lang="en-US" data-marpit-pagination="23" style="--paginate:true;--background-color:#E4E0EE;--theme:gaia;background-color:#E4E0EE;background-image:none;" data-marpit-pagination-total="41">
<h1 id="storing-and-querying-the-data">Storing and Querying the Data</h1>
<ul>
<li>No schema -- basically NoSQL!</li>
<li>Postgres Just Works(tm)</li>
</ul>
<pre is="marp-pre" data-auto-scaling="downscale-only"><code class="language-sql"><span class="hljs-keyword">CREATE</span> TEMPORARY <span class="hljs-keyword">TABLE</span> nosql (
    id SERIAL <span class="hljs-keyword">PRIMARY</span> KEY,
    data JSON
);

<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> nosql (&quot;data&quot;) <span class="hljs-keyword">VALUES</span> (<span class="hljs-string">&#x27;{&quot;foo&quot;: 12345}&#x27;</span>);

<span class="hljs-keyword">SELECT</span> &quot;data&quot;<span class="hljs-operator">-</span><span class="hljs-operator">&gt;&gt;</span><span class="hljs-string">&#x27;foo&#x27;</span> <span class="hljs-keyword">AS</span> bar <span class="hljs-keyword">FROM</span> nosql;
<span class="hljs-comment">/* =&gt; 12345 */</span>
</code></pre>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section data-paginate="true" data-background-color="#E4E0EE" data-theme="gaia" lang="en-US" data-marpit-pagination="24" style="--paginate:true;--background-color:#E4E0EE;--theme:gaia;background-color:#E4E0EE;background-image:none;--marpit-advanced-background-split:25%;" data-marpit-pagination-total="41" data-marpit-advanced-background="background" data-marpit-advanced-background-split="right"><div data-marpit-advanced-background-container="true" data-marpit-advanced-background-direction="horizontal"><figure style="background-image:url(&quot;./assets/simple-schema.png&quot;);background-size:contain;"></figure></div></section></foreignObject><foreignObject width="75%" height="720"><section id="24" data-paginate="true" data-background-color="#E4E0EE" data-theme="gaia" lang="en-US" data-marpit-pagination="24" style="--paginate:true;--background-color:#E4E0EE;--theme:gaia;background-color:#E4E0EE;background-image:none;--marpit-advanced-background-split:25%;" data-marpit-pagination-total="41" data-marpit-advanced-background="content" data-marpit-advanced-background-split="right">
<h1 id="sql-generation-step-1">SQL Generation Step 1</h1>
<pre is="marp-pre" data-auto-scaling="downscale-only"><code class="language-php"><span class="hljs-variable">$form</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DynamicForm</span>(<span class="hljs-variable">$form</span>-&gt;definition);

<span class="hljs-variable">$formFields</span> = <span class="hljs-title function_ invoke__">collect</span>(<span class="hljs-variable">$form</span>-&gt;<span class="hljs-title function_ invoke__">flatComponents</span>())
    -&gt;<span class="hljs-title function_ invoke__">filter</span>(function (ComponentInterface <span class="hljs-variable">$component</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-variable">$component</span>-&gt;<span class="hljs-title function_ invoke__">canValidate</span>();
    });

<span class="hljs-variable">$formFields</span>-&gt;<span class="hljs-title function_ invoke__">first</span>()-&gt;<span class="hljs-title function_ invoke__">label</span>();
<span class="hljs-comment">//=&gt; &quot;First Name&quot;</span>

<span class="hljs-variable">$formFields</span>-&gt;<span class="hljs-title function_ invoke__">first</span>()-&gt;<span class="hljs-title function_ invoke__">key</span>();
<span class="hljs-comment">//=&gt; &quot;firstName&quot;</span>
</code></pre>
</section>
</foreignObject><foreignObject width="1280" height="720" data-marpit-advanced-background="pseudo"><section data-paginate="true" data-background-color="#E4E0EE" data-theme="gaia" lang="en-US" data-marpit-pagination="24" style="" data-marpit-pagination-total="41" data-marpit-advanced-background="pseudo" data-marpit-advanced-background-split="right"></section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section data-paginate="true" data-background-color="#E4E0EE" data-theme="gaia" lang="en-US" data-marpit-pagination="25" style="--paginate:true;--background-color:#E4E0EE;--theme:gaia;background-color:#E4E0EE;background-image:none;--marpit-advanced-background-split:25%;" data-marpit-pagination-total="41" data-marpit-advanced-background="background" data-marpit-advanced-background-split="right"><div data-marpit-advanced-background-container="true" data-marpit-advanced-background-direction="horizontal"><figure style="background-image:url(&quot;./assets/simple-schema.png&quot;);background-size:contain;"></figure></div></section></foreignObject><foreignObject width="75%" height="720"><section id="25" data-paginate="true" data-background-color="#E4E0EE" data-theme="gaia" lang="en-US" data-marpit-pagination="25" style="--paginate:true;--background-color:#E4E0EE;--theme:gaia;background-color:#E4E0EE;background-image:none;--marpit-advanced-background-split:25%;" data-marpit-pagination-total="41" data-marpit-advanced-background="content" data-marpit-advanced-background-split="right">
<h1 id="sql-generation-step-2">SQL Generation Step 2</h1>
<pre is="marp-pre" data-auto-scaling="downscale-only"><code class="language-php"><span class="hljs-variable">$columnNames</span> = <span class="hljs-variable">$formFields</span>
    -&gt;<span class="hljs-title function_ invoke__">map</span>(fn (<span class="hljs-variable">$component</span>) =&gt; <span class="hljs-variable">$component</span>-&gt;<span class="hljs-title function_ invoke__">key</span>())
    -&gt;<span class="hljs-title function_ invoke__">map</span>(fn (<span class="hljs-variable">$key</span>) =&gt; <span class="hljs-string">&quot;submissions.submission-&gt;&gt;&#x27;<span class="hljs-subst">{$key}</span>&#x27;&quot;</span>);

<span class="hljs-title class_">Submission</span>::<span class="hljs-title function_ invoke__">query</span>()
    -&gt;<span class="hljs-title function_ invoke__">join</span>(<span class="hljs-string">&#x27;forms&#x27;</span>, ...)
    -&gt;<span class="hljs-title function_ invoke__">join</span>(<span class="hljs-string">&#x27;users&#x27;</span>, ...)
    -&gt;<span class="hljs-title function_ invoke__">addSelect</span>(<span class="hljs-variable">$columnNames</span>);

</code></pre>
</section>
</foreignObject><foreignObject width="1280" height="720" data-marpit-advanced-background="pseudo"><section data-paginate="true" data-background-color="#E4E0EE" data-theme="gaia" lang="en-US" data-marpit-pagination="25" style="" data-marpit-pagination-total="41" data-marpit-advanced-background="pseudo" data-marpit-advanced-background-split="right"></section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section data-paginate="true" data-background-color="#E4E0EE" data-theme="gaia" lang="en-US" data-marpit-pagination="26" style="--paginate:true;--background-color:#E4E0EE;--theme:gaia;background-color:#E4E0EE;background-image:none;--marpit-advanced-background-split:25%;" data-marpit-pagination-total="41" data-marpit-advanced-background="background" data-marpit-advanced-background-split="right"><div data-marpit-advanced-background-container="true" data-marpit-advanced-background-direction="horizontal"><figure style="background-image:url(&quot;./assets/simple-schema.png&quot;);background-size:contain;"></figure></div></section></foreignObject><foreignObject width="75%" height="720"><section id="26" data-paginate="true" data-background-color="#E4E0EE" data-theme="gaia" lang="en-US" data-marpit-pagination="26" style="--paginate:true;--background-color:#E4E0EE;--theme:gaia;background-color:#E4E0EE;background-image:none;--marpit-advanced-background-split:25%;" data-marpit-pagination-total="41" data-marpit-advanced-background="content" data-marpit-advanced-background-split="right">
<h1 id="sql-generation-step-3">SQL Generation Step 3</h1>
<pre is="marp-pre" data-auto-scaling="downscale-only"><code class="language-sql"><span class="hljs-keyword">SELECT</span>
    forms.name <span class="hljs-keyword">AS</span> form_type,
    users.name <span class="hljs-keyword">AS</span> user_name,
    submissions.submission<span class="hljs-operator">-</span><span class="hljs-operator">&gt;&gt;</span><span class="hljs-string">&#x27;firstName&#x27;</span>,
    submissions.submission<span class="hljs-operator">-</span><span class="hljs-operator">&gt;&gt;</span><span class="hljs-string">&#x27;lastName&#x27;</span>
<span class="hljs-keyword">FROM</span> submissions
<span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> forms <span class="hljs-keyword">ON</span> submissions.form_id <span class="hljs-operator">=</span> forms.form_id
<span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> users <span class="hljs-keyword">ON</span> submissions.user_id <span class="hljs-operator">=</span> user.id
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> 
    submissions.submission<span class="hljs-operator">-</span><span class="hljs-operator">&gt;&gt;</span><span class="hljs-string">&#x27;lastName&#x27;</span>, 
    submissions.submission<span class="hljs-operator">-</span><span class="hljs-operator">&gt;&gt;</span><span class="hljs-string">&#x27;firstName&#x27;</span>
</code></pre>
</section>
</foreignObject><foreignObject width="1280" height="720" data-marpit-advanced-background="pseudo"><section data-paginate="true" data-background-color="#E4E0EE" data-theme="gaia" lang="en-US" data-marpit-pagination="26" style="" data-marpit-pagination-total="41" data-marpit-advanced-background="pseudo" data-marpit-advanced-background-split="right"></section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="27" data-paginate="true" data-background-color="#E4E0EE" data-theme="gaia" lang="en-US" data-marpit-pagination="27" style="--paginate:true;--background-color:#E4E0EE;--theme:gaia;background-color:#E4E0EE;background-image:none;" data-marpit-pagination-total="41">
<h1 id="displaying-the-data">Displaying the Data</h1>
<p><img src="./assets/ui.png" alt="" style="width:1150px;" /></p>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section data-paginate="true" data-background-color="#E4E0EE" data-theme="gaia" lang="en-US" data-marpit-pagination="28" style="--paginate:true;--background-color:#E4E0EE;--theme:gaia;background-color:#E4E0EE;background-image:none;--marpit-advanced-background-split:50%;" data-marpit-pagination-total="41" data-marpit-advanced-background="background" data-marpit-advanced-background-split="left"><div data-marpit-advanced-background-container="true" data-marpit-advanced-background-direction="horizontal"><figure style="background-image:url(&quot;./assets/column-picker.png&quot;);background-size:contain;"></figure></div></section></foreignObject><foreignObject width="50%" height="720" x="50%"><section id="28" data-paginate="true" data-background-color="#E4E0EE" data-theme="gaia" lang="en-US" data-marpit-pagination="28" style="--paginate:true;--background-color:#E4E0EE;--theme:gaia;background-color:#E4E0EE;background-image:none;--marpit-advanced-background-split:50%;" data-marpit-pagination-total="41" data-marpit-advanced-background="content" data-marpit-advanced-background-split="left">
<h1 id="columns">Columns</h1>
<ul>
<li>Not all columns are simple</li>
<li>Scalar fields are easy!</li>
<li>Dropdown value needs label ...</li>
<li>Some form fields hold multiple pieces of data
<ul>
<li>Address has lat/long, normalized addr, etc</li>
</ul>
</li>
</ul>
</section>
</foreignObject><foreignObject width="1280" height="720" data-marpit-advanced-background="pseudo"><section data-paginate="true" data-background-color="#E4E0EE" data-theme="gaia" lang="en-US" data-marpit-pagination="28" style="" data-marpit-pagination-total="41" data-marpit-advanced-background="pseudo" data-marpit-advanced-background-split="left"></section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="29" data-paginate="true" data-background-color="#E4E0EE" data-theme="gaia" lang="en-US" data-marpit-pagination="29" style="--paginate:true;--background-color:#E4E0EE;--theme:gaia;background-color:#E4E0EE;background-image:none;" data-marpit-pagination-total="41">
<h1 id="fun-fact-alias-limits">Fun Fact: Alias Limits</h1>
<ul>
<li>Did you know: Postgres limits identifier to 63 bytes?</li>
<li>The below will cut off half-way</li>
</ul>
<pre is="marp-pre" data-auto-scaling="downscale-only"><code class="language-sql"><span class="hljs-keyword">SELECT</span>
    submissions.submission<span class="hljs-operator">-</span><span class="hljs-operator">&gt;&gt;</span><span class="hljs-string">&#x27;haveYouEverReceivedAGrantFromOurOfficeBeforeOrFromAnotherOrganizationSuchAsWeinberg&#x27;</span>
<span class="hljs-keyword">FROM</span> submissions;
</code></pre>
<pre is="marp-pre" data-auto-scaling="downscale-only"><code class="language-php"><span class="hljs-title function_ invoke__">array_keys</span>(<span class="hljs-variable">$queryResult</span>);
<span class="hljs-comment">//=&gt; [&quot;haveYouEverReceivedAGrantFromOurOfficeBeforeOrFromAnotherOrgani&quot;]</span>
</code></pre>
<ul>
<li>Alias columns with a hash!
<ul>
<li><code>submission-&gt;&gt;'foo' AS form_8c736521</code></li>
</ul>
</li>
</ul>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="30" data-paginate="true" data-background-color="#E4E0EE" data-theme="gaia" lang="en-US" data-marpit-pagination="30" style="--paginate:true;--background-color:#E4E0EE;--theme:gaia;background-color:#E4E0EE;background-image:none;" data-marpit-pagination-total="41">
<h1 id="mega-complicated-query">Mega Complicated Query</h1>
<ul>
<li>
<p>We actually don't join <em>one</em> form submission for SOAP</p>
<ul>
<li>We join a potentially infinite number</li>
<li>Users <em>also</em> define the workflow, which can be 5 forms in a row</li>
</ul>
</li>
<li>
<p>Sample query stats</p>
<ul>
<li>15 joins to <code>submissions</code></li>
<li>161 JSON columns selected</li>
<li>Ordered by 2 columns from JSON</li>
</ul>
</li>
<li>
<p>Runs in 38.5ms <img class="emoji" draggable="false" alt="ðŸš—" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/1f697.svg" data-marp-twemoji=""/><img class="emoji" draggable="false" alt="ðŸ’¨" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/1f4a8.svg" data-marp-twemoji=""/></p>
</li>
</ul>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="31" data-paginate="true" data-background-color="#E4E0EE" data-theme="gaia" lang="en-US" data-marpit-pagination="31" style="--paginate:true;--background-color:#E4E0EE;--theme:gaia;background-color:#E4E0EE;background-image:none;" data-marpit-pagination-total="41">
<h2 id="using-the-data-for-emails">Using the data for emails</h2>
<ul>
<li>Need to let people use the form data in confirmation emails, approval emails, etc</li>
<li>Solution: Add more JSON
<ul>
<li>Mustache <code>{{ variable }}</code> syntax</li>
<li>TinyMCE Plugin to insert the variables</li>
</ul>
</li>
</ul>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section data-paginate="true" data-background-color="#E4E0EE" data-theme="gaia" lang="en-US" data-marpit-pagination="32" style="--paginate:true;--background-color:#E4E0EE;--theme:gaia;background-color:#E4E0EE;background-image:none;--marpit-advanced-background-split:50%;" data-marpit-pagination-total="41" data-marpit-advanced-background="background" data-marpit-advanced-background-split="left"><div data-marpit-advanced-background-container="true" data-marpit-advanced-background-direction="horizontal"><figure style="background-image:url(&quot;./assets/tinymce-arch.png&quot;);"></figure></div></section></foreignObject><foreignObject width="50%" height="720" x="50%"><section id="32" data-paginate="true" data-background-color="#E4E0EE" data-theme="gaia" lang="en-US" data-marpit-pagination="32" style="--paginate:true;--background-color:#E4E0EE;--theme:gaia;background-color:#E4E0EE;background-image:none;--marpit-advanced-background-split:50%;" data-marpit-pagination-total="41" data-marpit-advanced-background="content" data-marpit-advanced-background-split="left">
<h2 id="using-the-data-for-emails-1">Using the data for emails</h2>
<ul>
<li>Generate two JSON docs
<ol>
<li>Schema listing out all the fields/datatypes for a workflow</li>
<li>Student data, with relational + NoSQL stuff combined</li>
</ol>
</li>
</ul>
</section>
</foreignObject><foreignObject width="1280" height="720" data-marpit-advanced-background="pseudo"><section data-paginate="true" data-background-color="#E4E0EE" data-theme="gaia" lang="en-US" data-marpit-pagination="32" style="" data-marpit-pagination-total="41" data-marpit-advanced-background="pseudo" data-marpit-advanced-background-split="left"></section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="33" data-paginate="true" data-background-color="#E4E0EE" data-theme="gaia" lang="en-US" data-marpit-pagination="33" style="--paginate:true;--background-color:#E4E0EE;--theme:gaia;background-color:#E4E0EE;background-image:none;" data-marpit-pagination-total="41">
<h2 id="combined-json-doc">Combined JSON Doc</h2>
<pre is="marp-pre" data-auto-scaling="downscale-only"><code class="language-json"><span class="hljs-punctuation">{</span>
    <span class="hljs-attr">&quot;applicationId&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1234</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;grantProgram&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> 
        <span class="hljs-attr">&quot;label&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Summer Research Grant&quot;</span><span class="hljs-punctuation">,</span> 
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;grantCycle&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> 
        <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Academic Year 2024-25&quot;</span><span class="hljs-punctuation">,</span> 
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;workflow&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">&quot;proposal&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">&quot;submittedAt&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;2024-01-01T00:00:00Z&quot;</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">&quot;form&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">&quot;firstName&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Willie&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">&quot;lastName&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Wildcat&quot;</span><span class="hljs-punctuation">}</span>
        <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="34" data-paginate="true" data-background-color="#E4E0EE" data-theme="gaia" lang="en-US" data-marpit-pagination="34" style="--paginate:true;--background-color:#E4E0EE;--theme:gaia;background-color:#E4E0EE;background-image:none;" data-marpit-pagination-total="41">
<h2 id="json-field-doc">JSON Field Doc</h2>
<pre is="marp-pre" data-auto-scaling="downscale-only"><code class="language-json"><span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span>   
        <span class="hljs-attr">&quot;section&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;General&quot;</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">&quot;fields&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
            <span class="hljs-punctuation">{</span> <span class="hljs-attr">&quot;label&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Application ID&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;int&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">&quot;path&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;applicationId&quot;</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
            <span class="hljs-punctuation">{</span> <span class="hljs-attr">&quot;label&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Program&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;string&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">&quot;path&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;grantProgram.label&quot;</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
            <span class="hljs-punctuation">{</span> <span class="hljs-attr">&quot;label&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Cycle Name&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;string&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">&quot;path&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;grantCycle.name&quot;</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span>   
        <span class="hljs-attr">&quot;section&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Proposal Form&quot;</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">&quot;fields&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
            <span class="hljs-punctuation">{</span> <span class="hljs-attr">&quot;label&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Submitted At&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;datetime&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">&quot;path&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;workflow.proposal.submittedAt&quot;</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
            <span class="hljs-punctuation">{</span> <span class="hljs-attr">&quot;label&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;First Name&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;string&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">&quot;path&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;workflow.proposal.form.firstName&quot;</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
            <span class="hljs-punctuation">{</span> <span class="hljs-attr">&quot;label&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Last Name&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;string&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">&quot;path&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;workflow.proposal.form.lastName&quot;</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span>    
<span class="hljs-punctuation">]</span>
</code></pre>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="35" data-paginate="true" data-background-color="#E4E0EE" data-theme="gaia" lang="en-US" data-marpit-pagination="35" style="--paginate:true;--background-color:#E4E0EE;--theme:gaia;background-color:#E4E0EE;background-image:none;" data-marpit-pagination-total="41">
<h1 id="tinymce-insert-variable-plugin">TinyMCE Insert Variable Plugin</h1>
<p><video controls="controls" style="width: 100%" autoplay src="./assets/insert-var-plugin.webm"></video></p>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="36" data-paginate="true" data-background-color="#E4E0EE" data-theme="gaia" lang="en-US" data-marpit-pagination="36" style="--paginate:true;--background-color:#E4E0EE;--theme:gaia;background-color:#E4E0EE;background-image:none;" data-marpit-pagination-total="41">
<h1 id="mustache-templates">Mustache Templates</h1>
<ul>
<li>Super simple templating language</li>
<li>Give it data &amp; some <code>{{ variables }}</code></li>
<li>Modifiers too: <code>{{ some_array | join }}</code>
<ul>
<li><code>[&quot;foo&quot;, &quot;bar&quot;]</code> =&gt; <code>&quot;foo, bar&quot;</code></li>
</ul>
</li>
</ul>
<pre is="marp-pre" data-auto-scaling="downscale-only"><code class="language-php"><span class="hljs-variable">$m</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Mustache_Engine</span>;

<span class="hljs-variable">$m</span>-&gt;<span class="hljs-title function_ invoke__">render</span>(
    <span class="hljs-string">&#x27;Hello {{ student.name }}&#x27;</span>, 
    <span class="hljs-title function_ invoke__">json_decode</span>(<span class="hljs-string">&#x27;{&quot;student&quot;: { &quot;name&quot;: &quot;Willie the Wildcat&quot;} }&#x27;</span>)
);
<span class="hljs-comment">//=&gt; &quot;Hello Willie the Wildcat&quot;</span>
</code></pre>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="37" data-paginate="true" data-background-color="#E4E0EE" data-theme="gaia" lang="en-US" data-marpit-pagination="37" style="--paginate:true;--background-color:#E4E0EE;--theme:gaia;background-color:#E4E0EE;background-image:none;" data-marpit-pagination-total="41">
<h2 id="complex-validations--calculated-values">Complex validations &amp; calculated values</h2>
<ul>
<li>
<p>Formio supports complex logic to</p>
<ul>
<li>Show or hide fields conditionally</li>
<li>Calculate values (sums, or more complicated things)</li>
<li>Validations (sum &gt; 5, etc)</li>
</ul>
</li>
<li>
<p>Formio lets you do &quot;complex&quot; logic in two ways</p>
<ul>
<li>JS <img class="emoji" draggable="false" alt="ðŸš«" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/1f6ab.svg" data-marp-twemoji=""/></li>
<li>JSONLogic <img class="emoji" draggable="false" alt="âœ”ï¸" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/2714.svg" data-marp-twemoji=""/></li>
</ul>
</li>
</ul>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="38" data-paginate="true" data-background-color="#E4E0EE" data-theme="gaia" lang="en-US" data-marpit-pagination="38" style="--paginate:true;--background-color:#E4E0EE;--theme:gaia;background-color:#E4E0EE;background-image:none;" data-marpit-pagination-total="41">
<h1 id="json-logic">JSON Logic</h1>
<ul>
<li>This type of thing -- easily sandboxed!</li>
</ul>
<pre is="marp-pre" data-auto-scaling="downscale-only"><code class="language-json"><span class="hljs-punctuation">{</span>
    <span class="hljs-attr">&quot;if&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
        <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">&quot;&lt;=&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
                <span class="hljs-punctuation">{</span> <span class="hljs-attr">&quot;var&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;data.requestedGrantAmountDollars&quot;</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
                <span class="hljs-number">1500</span>
            <span class="hljs-punctuation">]</span>
        <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
        <span class="hljs-string">&quot;Your request cannot exceed $1,500.&quot;</span>
    <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section data-paginate="true" data-background-color="#E4E0EE" data-theme="gaia" lang="en-US" data-marpit-pagination="39" style="--paginate:true;--background-color:#E4E0EE;--theme:gaia;background-color:#E4E0EE;background-image:none;" data-marpit-pagination-total="41" data-marpit-advanced-background="background"><div data-marpit-advanced-background-container="true" data-marpit-advanced-background-direction="horizontal"><figure style="background-image:url(&quot;./assets/calculations.png&quot;);background-size:contain;"></figure></div></section></foreignObject><foreignObject width="1280" height="720"><section id="39" data-paginate="true" data-background-color="#E4E0EE" data-theme="gaia" lang="en-US" data-marpit-pagination="39" style="--paginate:true;--background-color:#E4E0EE;--theme:gaia;background-color:#E4E0EE;background-image:none;" data-marpit-pagination-total="41" data-marpit-advanced-background="content"></section>
</foreignObject><foreignObject width="1280" height="720" data-marpit-advanced-background="pseudo"><section data-paginate="true" data-background-color="#E4E0EE" data-theme="gaia" lang="en-US" data-marpit-pagination="39" style="" data-marpit-pagination-total="41" data-marpit-advanced-background="pseudo"></section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="40" data-paginate="true" data-background-color="#E4E0EE" data-theme="gaia" lang="en-US" data-marpit-pagination="40" style="--paginate:true;--background-color:#E4E0EE;--theme:gaia;background-color:#E4E0EE;background-image:none;" data-marpit-pagination-total="41">
<h1 id="are-dynamic-forms-good">Are Dynamic Forms Good?</h1>
<ul>
<li>This is a huge architectural choice for your app</li>
<li>Dynamic forms solve HTML drudgery and empower admins
<ul>
<li>At the cost of <strong>way more complexity</strong> for dev</li>
<li>Gotta have all these ways to deal with NoSQL-esque data!</li>
</ul>
</li>
<li>Sometimes: this trade-off is worth it!
<ul>
<li>A lot of times: <em>it ain't.</em></li>
</ul>
</li>
</ul>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section data-background-color="#E4E0EE" data-class="lead" data-theme="gaia" lang="en-US" class="lead" style="--background-color:#E4E0EE;--class:lead;--theme:gaia;background-color:#E4E0EE;background-image:none;--marpit-advanced-background-split:50%;" data-marpit-advanced-background="background" data-marpit-advanced-background-split="left"><div data-marpit-advanced-background-container="true" data-marpit-advanced-background-direction="horizontal"><figure style="background-image:url(&quot;./assets/slide-deck-qr.png&quot;);background-size:90%;"></figure></div></section></foreignObject><foreignObject width="50%" height="720" x="50%"><section id="41" data-background-color="#E4E0EE" data-class="lead" data-theme="gaia" lang="en-US" class="lead" style="--background-color:#E4E0EE;--class:lead;--theme:gaia;background-color:#E4E0EE;background-image:none;--marpit-advanced-background-split:50%;" data-marpit-advanced-background="content" data-marpit-advanced-background-split="left">
<h1 id="the-end">The End</h1>
<p>Thanks for your interest!</p>
<p>Scan the QR code if you'd like a copy of this deck, or want the link to the <code>dynamic-forms</code> package.</p>
</section>
<script>!function(){"use strict";const t={h1:{proto:()=>HTMLHeadingElement,attrs:{role:"heading","aria-level":"1"},style:"display: block; font-size: 2em; margin-block-start: 0.67em; margin-block-end: 0.67em; margin-inline-start: 0px; margin-inline-end: 0px; font-weight: bold;"},h2:{proto:()=>HTMLHeadingElement,attrs:{role:"heading","aria-level":"2"},style:"display: block; font-size: 1.5em; margin-block-start: 0.83em; margin-block-end: 0.83em; margin-inline-start: 0px; margin-inline-end: 0px; font-weight: bold;"},h3:{proto:()=>HTMLHeadingElement,attrs:{role:"heading","aria-level":"3"},style:"display: block; font-size: 1.17em; margin-block-start: 1em; margin-block-end: 1em; margin-inline-start: 0px; margin-inline-end: 0px; font-weight: bold;"},h4:{proto:()=>HTMLHeadingElement,attrs:{role:"heading","aria-level":"4"},style:"display: block; margin-block-start: 1.33em; margin-block-end: 1.33em; margin-inline-start: 0px; margin-inline-end: 0px; font-weight: bold;"},h5:{proto:()=>HTMLHeadingElement,attrs:{role:"heading","aria-level":"5"},style:"display: block; font-size: 0.83em; margin-block-start: 1.67em; margin-block-end: 1.67em; margin-inline-start: 0px; margin-inline-end: 0px; font-weight: bold;"},h6:{proto:()=>HTMLHeadingElement,attrs:{role:"heading","aria-level":"6"},style:"display: block; font-size: 0.67em; margin-block-start: 2.33em; margin-block-end: 2.33em; margin-inline-start: 0px; margin-inline-end: 0px; font-weight: bold;"},span:{proto:()=>HTMLSpanElement},pre:{proto:()=>HTMLElement,style:"display: block; font-family: monospace; white-space: pre; margin: 1em 0; --marp-auto-scaling-white-space: pre;"}},e="data-marp-auto-scaling-wrapper",i="data-marp-auto-scaling-svg",n="data-marp-auto-scaling-container";class s extends HTMLElement{container;containerSize;containerObserver;svg;svgComputedStyle;svgPreserveAspectRatio="xMinYMid meet";wrapper;wrapperSize;wrapperObserver;constructor(){super();const t=t=>([e])=>{const{width:i,height:n}=e.contentRect;this[t]={width:i,height:n},this.updateSVGRect()};this.attachShadow({mode:"open"}),this.containerObserver=new ResizeObserver(t("containerSize")),this.wrapperObserver=new ResizeObserver(((...e)=>{t("wrapperSize")(...e),this.flushSvgDisplay()}))}static get observedAttributes(){return["data-downscale-only"]}connectedCallback(){this.shadowRoot.innerHTML=`\n<style>\n  svg[${i}] { display: block; width: 100%; height: auto; vertical-align: top; }\n  span[${n}] { display: table; white-space: var(--marp-auto-scaling-white-space, nowrap); width: max-content; }\n</style>\n<div ${e}>\n  <svg part="svg" ${i}>\n    <foreignObject><span ${n}><slot></slot></span></foreignObject>\n  </svg>\n</div>\n    `.split(/\n\s*/).join(""),this.wrapper=this.shadowRoot.querySelector(`div[${e}]`)??void 0;const t=this.svg;this.svg=this.wrapper?.querySelector(`svg[${i}]`)??void 0,this.svg!==t&&(this.svgComputedStyle=this.svg?window.getComputedStyle(this.svg):void 0),this.container=this.svg?.querySelector(`span[${n}]`)??void 0,this.observe()}disconnectedCallback(){this.svg=void 0,this.svgComputedStyle=void 0,this.wrapper=void 0,this.container=void 0,this.observe()}attributeChangedCallback(){this.observe()}flushSvgDisplay(){const{svg:t}=this;t&&(t.style.display="inline",requestAnimationFrame((()=>{t.style.display=""})))}observe(){this.containerObserver.disconnect(),this.wrapperObserver.disconnect(),this.wrapper&&this.wrapperObserver.observe(this.wrapper),this.container&&this.containerObserver.observe(this.container),this.svgComputedStyle&&this.observeSVGStyle(this.svgComputedStyle)}observeSVGStyle(t){const e=()=>{const i=(()=>{const e=t.getPropertyValue("--preserve-aspect-ratio");if(e)return e.trim();return`x${(({textAlign:t,direction:e})=>{if(t.endsWith("left"))return"Min";if(t.endsWith("right"))return"Max";if("start"===t||"end"===t){let i="rtl"===e;return"end"===t&&(i=!i),i?"Max":"Min"}return"Mid"})(t)}YMid meet`})();i!==this.svgPreserveAspectRatio&&(this.svgPreserveAspectRatio=i,this.updateSVGRect()),t===this.svgComputedStyle&&requestAnimationFrame(e)};e()}updateSVGRect(){let t=Math.ceil(this.containerSize?.width??0);const e=Math.ceil(this.containerSize?.height??0);void 0!==this.dataset.downscaleOnly&&(t=Math.max(t,this.wrapperSize?.width??0));const i=this.svg?.querySelector(":scope > foreignObject");if(i?.setAttribute("width",`${t}`),i?.setAttribute("height",`${e}`),this.svg&&(this.svg.setAttribute("viewBox",`0 0 ${t} ${e}`),this.svg.setAttribute("preserveAspectRatio",this.svgPreserveAspectRatio),this.svg.style.height=t<=0||e<=0?"0":""),this.container){const t=this.svgPreserveAspectRatio.toLowerCase();this.container.style.marginLeft=t.startsWith("xmid")||t.startsWith("xmax")?"auto":"0",this.container.style.marginRight=t.startsWith("xmi")?"auto":"0"}}}const r=(t,{attrs:e={},style:i})=>class extends t{constructor(...t){super(...t);for(const[t,i]of Object.entries(e))this.hasAttribute(t)||this.setAttribute(t,i);this._shadow()}static get observedAttributes(){return["data-auto-scaling"]}connectedCallback(){this._update()}attributeChangedCallback(){this._update()}_shadow(){if(!this.shadowRoot)try{this.attachShadow({mode:"open"})}catch(t){if(!(t instanceof Error&&"NotSupportedError"===t.name))throw t}return this.shadowRoot}_update(){const t=this._shadow();if(t){const e=i?`<style>:host { ${i} }</style>`:"";let n="<slot></slot>";const{autoScaling:s}=this.dataset;if(void 0!==s){n=`<marp-auto-scaling exportparts="svg:auto-scaling" ${"downscale-only"===s?"data-downscale-only":""}>${n}</marp-auto-scaling>`}t.innerHTML=e+n}}};let o;const a=Symbol();let l;const c="marpitSVGPolyfill:setZoomFactor,",d=Symbol(),h=Symbol();const g=()=>{const t="Apple Computer, Inc."===navigator.vendor,e=t?[u]:[],i={then:e=>(t?(async()=>{if(void 0===l){const t=document.createElement("canvas");t.width=10,t.height=10;const e=t.getContext("2d"),i=new Image(10,10),n=new Promise((t=>{i.addEventListener("load",(()=>t()))}));i.crossOrigin="anonymous",i.src="data:image/svg+xml;charset=utf8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2210%22%20height%3D%2210%22%20viewBox%3D%220%200%201%201%22%3E%3CforeignObject%20width%3D%221%22%20height%3D%221%22%20requiredExtensions%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxhtml%22%3E%3Cdiv%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxhtml%22%20style%3D%22width%3A%201px%3B%20height%3A%201px%3B%20background%3A%20red%3B%20position%3A%20relative%22%3E%3C%2Fdiv%3E%3C%2FforeignObject%3E%3C%2Fsvg%3E",await n,e.drawImage(i,0,0),l=e.getImageData(5,5,1,1).data[3]<128}return l})().then((t=>{null==e||e(t?[u]:[])})):null==e||e([]),i)};return Object.assign(e,i)};let p,m;function u(t){const e="object"==typeof t&&t.target||document,i="object"==typeof t?t.zoom:t;window[h]||(Object.defineProperty(window,h,{configurable:!0,value:!0}),document.body.style.zoom=1.0001,document.body.offsetHeight,document.body.style.zoom=1,window.addEventListener("message",(({data:t,origin:e})=>{if(e===window.origin)try{if(t&&"string"==typeof t&&t.startsWith(c)){const[,e]=t.split(","),i=Number.parseFloat(e);Number.isNaN(i)||(m=i)}}catch(t){console.error(t)}})));let n=!1;Array.from(e.querySelectorAll("svg[data-marpit-svg]"),(t=>{var e,s,r,o;t.style.transform||(t.style.transform="translateZ(0)");const a=i||m||t.currentScale||1;p!==a&&(p=a,n=a);const l=t.getBoundingClientRect(),{length:c}=t.children;for(let i=0;i<c;i+=1){const n=t.children[i];if(n.getScreenCTM){const t=n.getScreenCTM();if(t){const i=null!==(s=null===(e=n.x)||void 0===e?void 0:e.baseVal.value)&&void 0!==s?s:0,c=null!==(o=null===(r=n.y)||void 0===r?void 0:r.baseVal.value)&&void 0!==o?o:0,d=n.children.length;for(let e=0;e<d;e+=1){const s=n.children[e];if("SECTION"===s.tagName){const{style:e}=s;e.transformOrigin||(e.transformOrigin=`${-i}px ${-c}px`),e.transform=`scale(${a}) matrix(${t.a}, ${t.b}, ${t.c}, ${t.d}, ${t.e-l.left}, ${t.f-l.top}) translateZ(0.0001px)`;break}}}}}})),!1!==n&&Array.from(e.querySelectorAll("iframe"),(({contentWindow:t})=>{null==t||t.postMessage(`${c}${n}`,"null"===window.origin?"*":window.origin)}))}function v({once:t=!1,target:e=document}={}){const i=function(t=document){if(t[d])return t[d];let e=!0;const i=()=>{e=!1,delete t[d]};Object.defineProperty(t,d,{configurable:!0,value:i});let n=[],s=!1;(async()=>{try{n=await g()}finally{s=!0}})();const r=()=>{for(const e of n)e({target:t});s&&0===n.length||e&&window.requestAnimationFrame(r)};return r(),i}(e);return t?(i(),()=>{}):i}p=1,m=void 0;const w=Symbol(),b=(e=document)=>{if("undefined"==typeof window)throw new Error("Marp Core's browser script is valid only in browser context.");if(((e=document)=>{const i=window[a];i||customElements.define("marp-auto-scaling",s);for(const n of Object.keys(t)){const s=`marp-${n}`,a=t[n].proto();(o??(o=!!document.createElement("div",{is:"marp-auto-scaling"}).outerHTML.startsWith("<div is"),o))&&a!==HTMLElement?i||customElements.define(s,r(a,{style:t[n].style}),{extends:n}):(i||customElements.define(s,r(HTMLElement,t[n])),e.querySelectorAll(`${n}[is="${s}"]`).forEach((t=>{t.outerHTML=t.outerHTML.replace(new RegExp(`^<${n}`,"i"),`<${s}`).replace(new RegExp(`</${n}>$`,"i"),`</${s}>`)})))}window[a]=!0})(e),e[w])return e[w];const i=v({target:e}),n=()=>{i(),delete e[w]},l=Object.assign(n,{cleanup:n,update:()=>b(e)});return Object.defineProperty(e,w,{configurable:!0,value:l}),l},y=document.currentScript;b(y?y.getRootNode():document)}();
</script></foreignObject><foreignObject width="1280" height="720" data-marpit-advanced-background="pseudo"><section data-background-color="#E4E0EE" data-class="lead" data-theme="gaia" lang="en-US" class="lead" style="" data-marpit-advanced-background="pseudo" data-marpit-advanced-background-split="left"></section></foreignObject></svg></div><div class="bespoke-marp-note" data-index="1" tabindex="0"><p>Just to set things up: this is a case study. We made some cool tech as part of a larger project, and I want to talk about it.

There were some interesting challenges in using this tech. It solved some problems, but created new ones.

If you have questions as we're going through, just shout me down and ask!</p></div><div class="bespoke-marp-note" data-index="2" tabindex="0"><p>We often have a problem: we've got an app that was built to solve some specific problems and do a specific workflow. But as the years roll on, it grows and grows...it's not just a form collecting some data for one person. It's a platform with two dozen forms, all handled slightly differently.

 You've probably all been here. It becomes a drain on our time to keep it going. At any given moment, *somebody* will want to change *something* in there, right? And it's usually small things, &quot;oh we need a new value in this dropdown&quot;.
 
 And that's important for them. I'm not saying those sorts of changes are unimportant! 
 
 What I am saying, is that it becomes a little absurd when we're paying a highly-trained, experienced senior developer to change the colours of buttons or whatever for a week out of every month.</p></div><div class="bespoke-marp-note" data-index="3" tabindex="0"><p>I've defined a general class of problem, but that's kind of abstract. For better storytelling, let's do a case study on an actual project: SOAP. This thing exists, and we learned quite a lot about the new problems that get created when we solve the original problem. 

SOAP is a workflow system, but oriented towards grant-makers and grant-seekers. Grant opportunities come and go as the academic years roll by, right? Or the requirements change, or the funding amounts change...or the grant-makers want to collect different data.

Before SOAP, NUIT had another piece of software, and we'd basically have to implement a workflow from scratch in PHP every time somebody had a bunch of money to give away. 

That app started out as one workflow and one form. For a single form, why build anything fancy, right? Slap down some HTML, a few validations, make a DB table, show the records in a datagrid, *done*.

But nothing stays in that state. They came up with more grants ... and other departments heard about the grant workflow system and joined up. 

So, our goal with SOAP was to make everything self-service. We wanted something easy for a program assistant-type person to use. 

If, for example, HR changed some of the payroll paperwork we need to collect: it should be easy for a program assistant to go in and change what files need to be uploaded to receive their grant.

If they need new dropdown values, they can just go do that! No more communications back-and-forth, no more managing testing in dev with the stakeholder. They make a change, they see the preview, and they confirm they did what they wanted. On their own time, at their own pace.

This is ambitious. Building something like SurveyMoney from nothing would be a lot of work. So...</p></div><div class="bespoke-marp-note" data-index="4" tabindex="0"><p>Now, what are SurveyMonkey, if not a low-code workflow builder? We've got a couple of those at NU.

The obvious one is OnBase. You can build forms, we can put SSO in front of them, you can put workflow around it. The *problem* is to do any of that, you need like fifteen thousand dollars worth of training courses.

The folks we want to give this to have jobs already. They don't have two weeks to drop everything and take expensive OnBase classes. So we need something easier.

PerfectForms, Google Forms, and the Microsoft Forms plus Power Automate can all theoretically do what we want, to varying degrees.

We took a look at some vendors making Grant Management Systems too. Not gunna go into that too much here, since it's not the point of the deck. But if you wanna talk about that, find me later.</p></div><div class="bespoke-marp-note" data-index="5" tabindex="0"><p>But they don't look nice, and builing a complicated grant management system out of those is hard. We need to get the data *out* of those tools to do any of the workflow things, reporting, etc.

Beyond just forms, we need to manage stuff like a faculty directory, payroll paperwork, potentially-sensitive documents, integrations...and it all needs to be mobile-friendly and meet the AccessibleNU standards.

And we want to extend the form builder. We don't just want a dropdown -- we want an auto-complete field with faculty, so a student can say &quot;I'm working with Chad Mirkin on this project&quot; and it can go follow up with him.</p></div><div class="bespoke-marp-note" data-index="6" tabindex="0"><p>Enter: Form.io. This is a SaaS, sort of like SurveyMoney. They offer a powerful form builder, host the forms, and host the submission data. You can take data out with APIs or CSV exports. Y'all get the idea.

But the most interesting thing: they're an open source company. Most of their product is MIT-licensed. There are three pieces of interest: the form builder JS library, the form renderer library, to collect submissions. And a backend server to validate the data and store it.

All of that is JS code.</p></div><div class="bespoke-marp-note" data-index="7" tabindex="0"><p>This thing supports a lot!

You've got your basics: file uploads, and fancier form elements like TinyMCE instead of a plain-old textarea.

The file uploads support traditional multipart form uploads, but they *also* support pre-signed S3 uploads, which are important for serverless applications.</p></div><div class="bespoke-marp-note" data-index="8" tabindex="0"><p>Their frontend code provides drag-n-drop WYSIWYG experience, and it comes with a range of form fields and layout components. There's simple validations, and support for more complicated rules using boolean JSONLogic. There's an easy conditional show/hide setting for stuff like a showing a required text field if somebody picks &quot;Other&quot; from a dropdown -- and again, you can get even more complicated with JSONLogic.

It's also extensible: we can write our own JS for more form fields, and they can do whatever: call APIs, render totally differently, anything. 

We were also able to customize the templates for the built-in fields. So if somebody uploads a PDF into a file field, we can detect that and display the PDF with an embed tag instead of just a download link.</p></div><div class="bespoke-marp-note" data-index="9" tabindex="0"><p>The form builder is emitting JSON. So you drag and drop to your hearts content, and server-side, we just hold on to this JSON document. That's pretty easy.</p></div><div class="bespoke-marp-note" data-index="10" tabindex="0"><p>When we want the form to be filled out, it's pretty straightforward JS. This will render everything, as it was in the builder. If you want it to, it can run field validations client-side for instant feedback. 

Our version has been muddied up further because there's a ton of options you can pass to do stuff like render the form as read-only, for viewing. Or triggering auto-saves POSTs when the data gets changed.</p></div><div class="bespoke-marp-note" data-index="11" tabindex="0"><p>The UI they have was both user- and developer-friendly. I decided I definitely wanted to use it. That left a big decision, though: those are only frontend libraries. I'm writing PHP apps, so whenever somebody submits, I need a way to *actually* validate the data server-side.

There were two options: we could add a Formio NodeJS and MongoDB server to our stack, and submit data to that. The PHP app could either query Mongo, or I could set it up to copy the data into Postgres on-save.</p></div><div class="bespoke-marp-note" data-index="12" tabindex="0"><p>So option A, run the full stack from Formio, in parallel with our application.

Most of our apps are serverless on AWS, but the Formio server would have required running containers. That's a relatively expensive proposition, compared to what AWS Lambda costs. That isn't the end of the world, but it *also* adds more operational complexity: suddenly, we're supporting a PHP app, and a NodeJS app, and an extra database. The containers need periodic rebuilds to get OS patches.

If we were planning to use only the out-of-the-box functionality from Formio, the cost and operational complexity might have been worth not having to do any development. But we wanted to add new types of form fields, which would require writing the validation code in their server -- so we need to fork the code and make our own Docker images.

The other issue: I have a big thick arrow between the two halves. Getting the data from Mongo and into the main app would have meant either building a sync mechanism, or querying Mongo directly from the PHP app.

That's all possible, but it's a HUGE pain if I want to sort relational data by a field somebody filled into a form. For example, the student picks what area their research project is for -- arts, engineering, and so on. If somebody wanted to sort the applications ... well, a lot of that data exists in Postgres, and you can't exactly INNER JOIN to Mongo.

This feels a lot like trading up-front work for long-term work, or accepting severe limitations on what we can do with the data.</p></div><div class="bespoke-marp-note" data-index="13" tabindex="0"><p>We discussed this internally, and decided to have two people work on a PHP library. It would parse the form schema JSON to find all the rules, and translate them into Laravel's validation rules. 

We figured: the team working on this already supports OnBase and PerfectForms. Low-code tools to collect data are in demand. We'd probably find a use for this tech in other apps, so making it super easy to reuse was worth the effort.

If you look at the example here, this is a Laravel controller. Imagine the store method is a POST for submitting one of our user-defined forms.

To validate it, we wrote a macro on Request that runs our code. It behaves like the usual validate method, it just needs the form builder's JSON to parse out validations.

Internally, this library is converting Formio's validation logic into Laravel Validator rules, plus a bit more. But we'll come back to that &quot;plus a bit more&quot; soon ...</p></div><div class="bespoke-marp-note" data-index="14" tabindex="0"><p>This code is available for you to use in your own Laravel apps. You can probably adapt it for normal PHP apps too, if you include the illuminate/validator package. I haven't tried that. In theory, that would work.

But, on Laravel, this will pull in the UI packages for formio. They depend on Bootstrap and Font Awesome -- if you're using those in your app already, you're golden.

The QR code here links to the docs for the library.</p></div><div class="bespoke-marp-note" data-index="16" tabindex="0"><p>Infinite customization brings its own set of problems. In the old world, where NUIT defined all the forms and workflows in code, we had guarantees about the data: a DB table has a certain set of columns, and you know you can use them.

But in SOAP, people can build any form they want. The backend code cannot make assumptions about fields. This makes using the data so much more annoying. 

You see here a whole host of things we need to do for our implementation. Most of them stem from the fact that the app essentially has no defined database schema for the most important data. Instead, we have a couple heaps of JSON.</p></div><div class="bespoke-marp-note" data-index="17" tabindex="0"><p>We'll start with our easiest challenge. The form builer comes with your basics, but the first thing I want is a widget to search the NU Directory.

This isn't too hard. I looked at their Address component and wrote some JS to query the API. The Address one can query Google Maps or OpenStreetMap, so it was a good example of what we needed to do.

If it gets somebody back, it fills in their name, affiliation, job title, etc, and then we implemented the addional validations both client-side and server-side.</p></div><div class="bespoke-marp-note" data-index="18" tabindex="0"><p>Here's the builder popup for our new component. When it stores data, it's storing an object in the JSON with their netID, email, and a couple other fields.</p></div><div class="bespoke-marp-note" data-index="19" tabindex="0"><p>We made a small change to the delivered functionality of file uploads. Normally, you have a UI control like this: filename, file size. You click it to download the file.

But in our case, most of the files were PDFs for grant proposals. When you're looking at a student's application form, you'd like to see that data instead of downloading it and opening another window to read their PDF, right?</p></div><div class="bespoke-marp-note" data-index="20" tabindex="0"><p>The library made it easy to grab the template for the file form component. We added a little code to filter PDFs out from other files, and convert them into an object tag, so the browser pulls PDFs right into the webpage.</p></div><div class="bespoke-marp-note" data-index="21" tabindex="0"><p>And there it is. If you're reviewing, it's much easier now!</p></div><div class="bespoke-marp-note" data-index="22" tabindex="0"><p>So that's enough about fiddling with the vendor's UI library. Let's talk about living in a schema-less world. 

Some of you may be aware of this, but Postgres has a JSON datatype, and a series of operators for querying that. You can use a field in a JSON document for WHERE clauses, ORDER BY, JOINs, etc. 

Here's a very simple example: a table with a JSON column called data, and a SELECT query getting the &quot;foo&quot; value from the JSON document.</p></div><div class="bespoke-marp-note" data-index="23" tabindex="0"><p>We can work with this noSQL-ish data in Postgres by generating a query. Imagine we have the two tables on the side: one for forms, which hold their definitions, and one for the data people submit.

With a little code, we can get all the form fields, their labels, and the JSON field keys from the form builder's JSON.</p></div><div class="bespoke-marp-note" data-index="24" tabindex="0"><p>You can parse the field keys out of the JSON, and then use that info to select fields from the submission JSON data as individual columns.

That's what the weird operator in the select clause is, for first name &amp; last name.

Once you do that, ... they work like normal columns in any relational database. Here's simplified code for doing it with the ORM in Laravel.</p></div><div class="bespoke-marp-note" data-index="25" tabindex="0"><p>Here's an example of a query that gets generated. It's pretty straightforward, right?</p></div><div class="bespoke-marp-note" data-index="26" tabindex="0"><p>The form label that somebody set up when they designed the form is available too, so you can start making nice UIs with the query results. 

Here's a datatable. Paginated results, checkboxes for bulk actions. There's a column picker in the top-right corner.

But it's all pretty normal stuff now. The true relational data is highlighted in light blue; the data from the NoSQL-esque form submission is highlighted in pink.</p></div><div class="bespoke-marp-note" data-index="27" tabindex="0"><p>For most real-life applications, that column picker will be Doing Work. People can put an unlimited number of fields in ... but the screen is only so big.

And, not all columns are simple. Something you'll need to deal with in this paradigm is that not every form field is a scalar value. Text inputs are easy, but how do you handle an object?

The most common thing we have is our custom netID lookup. That knows your name, netID, primary affiliation, job title, etc, so when we get one of those, instead of converting it into ONE column in our SQL query, it's broken out into six individual pieces of data, and that's six possible columns to select.</p></div><div class="bespoke-marp-note" data-index="28" tabindex="0"><p>As we were testing this approach out, everything worked flawlessly.

Then we let a user test it. They made form fields with huge, long labels. The formio builder turned those into long JSON keys.

And it turns out, Postgres will silently truncate identifiers at 63 bytes. So a bunch of columns were mysteriously blank on our datatable.

The JSON key being long is fine, but a column or table identifier gets truncated. So if you do this, you wanna hash the field's key and make that an alias, or something.</p></div><div class="bespoke-marp-note" data-index="29" tabindex="0"><p>I wasn't sure how this would perform, but as we got further into the implementation, it became very clear that all this JSON stuff in Postgres was not a concern.

You see, SOAP doesn't join that submission data once. Users build their own workflows, so it might be a form for the student, a form for a researcher to agree to help the student, a form to approve the project, a form to collect payroll info ... and so on.

We join that table a lot for the dashboard. In my sample query, fifteen times, picking up 161 columns from custom forms.

This query returns results in 38 miliseconds. That's quite good, given everything it's doing. 

The key is probably pagination. It selects 25 records at a time, so there's always some kind of bounding on what we're doing.</p></div><div class="bespoke-marp-note" data-index="30" tabindex="0"><p>Switching topics now. A common thing you gotta do when somebody submits a form, is send them a &quot;thanks for submitting&quot; email. A receipt for their form, if you will.

This becomes a gigantic pain when half the data is unstructured. You can't pre-define variables for people to put in email templates anymore. This too must look at the form definition to figure out what fields to give people.</p></div><div class="bespoke-marp-note" data-index="31" tabindex="0"><p>Here's a picture of what I'm trying to describe: we take the form definition and our own DB schema, and make that schema JSON. That's one JSON doc. The second is where we take actual data for a student filling out forms, and put it together: the relational data and the NosQL formio data. 

These feed into two different spots: one into our editor for email templates, and one into the code that sends emails.</p></div><div class="bespoke-marp-note" data-index="32" tabindex="0"><p>So here's a very, very simplified version of that big JSON document. This is combining relational and NoSQL data: most of this doc is relational. But, that &quot;form&quot; key at the bottom is the form submission JSON from formio. 

Any process using this JSON doesn't know the difference. It's just JSON. On its own, this is not very exciting.</p></div><div class="bespoke-marp-note" data-index="33" tabindex="0"><p>The second document is a schema that combines the layout of our relational and NoSQL data together, basically. You see I have two &quot;sections&quot;, which have three fields each. 

The sections are headers -- general information has the app ID and the grant program. The proposal form has the fields from the user-defined formio form, but also some relational data like when the form got submitted.

The UI can use this for things like the column selection dropdown. Or, a TinyMCE plugin can use this on the next slide ...</p></div><div class="bespoke-marp-note" data-index="34" tabindex="0"><p>So, to start this slide off, I want to admit that I am lying to you. For SOAP, we used a similar editor to TinyMCE, called Quill. This was widely regarded as a mistake. Customizing Quill was a horrible experience. 

On a subsequent project using this tech, we used TinyMCE instead. It was much easier to get this working on TinyMCE. So, let's pretend the Quill thing never happened.

But here's what it looks like. The Insert Variable popup is consuming the schema JSON document to figure out what sections and fields to offer. When you insert it, it puts the path in the email.

The plugin we made isn't packaged up nicely like the dynamic-forms PHP stuff. But if somebody's interested, we're quite happy to share the code. I think Tim wrote most of the TinyMCE plugin. Hi Tim!</p></div><div class="bespoke-marp-note" data-index="35" tabindex="0"><p>To actually get the variable substitution working, we feed the JSON doc with the combined relational and NoSQL data. It figures it out from there. 

You can do simple formatting functions too. Joining arrays into strings, date formats, that sort of thing. The insert variable TinyMCE tool knows what datatype each field is, so it can intelligently include date format functions or whatever when it inserts the Mustache variable.</p></div><div class="bespoke-marp-note" data-index="36" tabindex="0"><p>Next topic. There's a really good way to do simple conditional fields show this field if this other field has a value of &quot;other&quot;. That's a very easy UI paradigm.

But as soon as it has to be more complicated, Formio ejects into &quot;write code&quot;. They offer two ways to do this: let your users write JS that has to be executed client- and server-side, or write JSONLogic.

NodeJS is right out. I'm not running arbitrary JS on my server. That seems like asking for trouble.

JSONLogic is a bit safer...</p></div><div class="bespoke-marp-note" data-index="37" tabindex="0"><p>JSON Logic is writing basic logic, in JSON. The upside to this is there's a PHP library for it already, which we incorporated into the dynamic-forms validator. 

Since this is doing basic logic, this is all data being evaluated. It's not user-supplied code running in our app. So it's much less likely to result in Bad Security Outcomes.

Formio hooks some Lodash functions into it, to give it things like sum or string concatenation. Otherwise, it just has really basic math and boolean logic operators out of the box.

Adapting Lodash, which is a JS lib, for our server-side stuff was a huge undertaking. We found or reimplemented all the functions it has, in PHP. It took a month, but it's been sooooo worth it. 

We reused all of this for parts of our workflow implementation, too. Moving between steps of the workflow runs some JSONLogic. I don't have time to go into that, but it's really handy for exposing advanced functionality.</p></div><div class="bespoke-marp-note" data-index="38" tabindex="0"><p>This is an example of a form one of our grant-givers set up. It's a budget, broken down by expense types, for a conference travel reimbursement. They can get 50% of their expenses up to $1500 reimbursed.

There are actually like 15 cost fields, I just can't fit them all on the slide. But at the bottom, highlighted in green, somebody used JSON Logic to sum up all the fields.

Highlighted in blue, they use JSON Logic again to do the 50% up to $1,500 logic. That value gets used in subsequent steps of the workflow, ending up on the payroll paperwork.

Powerful stuff.</p></div><script>/*!! License: https://unpkg.com/@marp-team/marp-cli@4.0.0/lib/bespoke.js.LICENSE.txt */
!function(){"use strict";function e(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var t,n,r=(n||(n=1,t={from:function(e,t){var n,r=1===(e.parent||e).nodeType?e.parent||e:document.querySelector(e.parent||e),o=[].filter.call("string"==typeof e.slides?r.querySelectorAll(e.slides):e.slides||r.children,(function(e){return"SCRIPT"!==e.nodeName})),a={},i=function(e,t){return(t=t||{}).index=o.indexOf(e),t.slide=e,t},s=function(e,t){a[e]=(a[e]||[]).filter((function(e){return e!==t}))},c=function(e,t){return(a[e]||[]).reduce((function(e,n){return e&&!1!==n(t)}),!0)},l=function(e,t){o[e]&&(n&&c("deactivate",i(n,t)),n=o[e],c("activate",i(n,t)))},d=function(e,t){var r=o.indexOf(n)+e;c(e>0?"next":"prev",i(n,t))&&l(r,t)},u={off:s,on:function(e,t){return(a[e]||(a[e]=[])).push(t),s.bind(null,e,t)},fire:c,slide:function(e,t){if(!arguments.length)return o.indexOf(n);c("slide",i(o[e],t))&&l(e,t)},next:d.bind(null,1),prev:d.bind(null,-1),parent:r,slides:o,destroy:function(e){c("destroy",i(n,e)),a={}}};return(t||[]).forEach((function(e){e(u)})),n||l(0),u}}),t),o=e(r);const a=document.body,i=(...e)=>history.replaceState(...e),s="",c="presenter",l="next",d=["",c,l],u="bespoke-marp-",f=`data-${u}`,m=(e,{protocol:t,host:n,pathname:r,hash:o}=location)=>{const a=e.toString();return`${t}//${n}${r}${a?"?":""}${a}${o}`},g=()=>a.dataset.bespokeView,p=e=>new URLSearchParams(location.search).get(e),v=(e,t={})=>{const n={location,setter:i,...t},r=new URLSearchParams(n.location.search);for(const t of Object.keys(e)){const n=e[t];"string"==typeof n?r.set(t,n):r.delete(t)}try{n.setter({...window.history.state??{}},"",m(r,n.location))}catch(e){console.error(e)}},h=(()=>{const e="bespoke-marp";try{return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch{return!1}})(),y=e=>{try{return localStorage.getItem(e)}catch{return null}},b=(e,t)=>{try{return localStorage.setItem(e,t),!0}catch{return!1}},w=e=>{try{return localStorage.removeItem(e),!0}catch{return!1}},x=(e,t)=>{const n="aria-hidden";t?e.setAttribute(n,"true"):e.removeAttribute(n)},k=e=>{e.parent.classList.add(`${u}parent`),e.slides.forEach((e=>e.classList.add(`${u}slide`))),e.on("activate",(t=>{const n=`${u}active`,r=t.slide,o=r.classList,a=!o.contains(n);if(e.slides.forEach((e=>{e.classList.remove(n),x(e,!0)})),o.add(n),x(r,!1),a){const e=`${n}-ready`;o.add(e),document.body.clientHeight,o.remove(e)}}))},$=e=>{let t=0,n=0;Object.defineProperty(e,"fragments",{enumerable:!0,value:e.slides.map((e=>[null,...e.querySelectorAll("[data-marpit-fragment]")]))});const r=r=>void 0!==e.fragments[t][n+r],o=(r,o)=>{t=r,n=o,e.fragments.forEach(((e,t)=>{e.forEach(((e,n)=>{if(null==e)return;const a=t<r||t===r&&n<=o;e.setAttribute(`${f}fragment`,(a?"":"in")+"active");const i=`${f}current-fragment`;t===r&&n===o?e.setAttribute(i,"current"):e.removeAttribute(i)}))})),e.fragmentIndex=o;const a={slide:e.slides[r],index:r,fragments:e.fragments[r],fragmentIndex:o};e.fire("fragment",a)};e.on("next",(({fragment:a=!0})=>{if(a){if(r(1))return o(t,n+1),!1;const a=t+1;e.fragments[a]&&o(a,0)}else{const r=e.fragments[t].length;if(n+1<r)return o(t,r-1),!1;const a=e.fragments[t+1];a&&o(t+1,a.length-1)}})),e.on("prev",(({fragment:a=!0})=>{if(r(-1)&&a)return o(t,n-1),!1;const i=t-1;e.fragments[i]&&o(i,e.fragments[i].length-1)})),e.on("slide",(({index:t,fragment:n})=>{let r=0;if(void 0!==n){const o=e.fragments[t];if(o){const{length:e}=o;r=-1===n?e-1:Math.min(Math.max(n,0),e-1)}}o(t,r)})),o(0,0)},E=document,L=()=>!(!E.fullscreenEnabled&&!E.webkitFullscreenEnabled),S=()=>!(!E.fullscreenElement&&!E.webkitFullscreenElement),P=e=>{e.fullscreen=()=>{L()&&(async()=>{S()?(E.exitFullscreen||E.webkitExitFullscreen)?.call(E):((e=E.body)=>{(e.requestFullscreen||e.webkitRequestFullscreen)?.call(e)})()})()},document.addEventListener("keydown",(t=>{"f"!==t.key&&"F11"!==t.key||t.altKey||t.ctrlKey||t.metaKey||!L()||(e.fullscreen(),t.preventDefault())}))},_=`${u}inactive`,T=(e=2e3)=>({parent:t,fire:n})=>{const r=t.classList,o=e=>n(`marp-${e?"":"in"}active`);let a;const i=()=>{a&&clearTimeout(a),a=setTimeout((()=>{r.add(_),o()}),e),r.contains(_)&&(r.remove(_),o(!0))};for(const e of["mousedown","mousemove","touchend"])document.addEventListener(e,i);setTimeout(i,0)},I=["AUDIO","BUTTON","INPUT","SELECT","TEXTAREA","VIDEO"],M=e=>{e.parent.addEventListener("keydown",(e=>{if(!e.target)return;const t=e.target;(I.includes(t.nodeName)||"true"===t.contentEditable)&&e.stopPropagation()}))},O=e=>{window.addEventListener("load",(()=>{for(const t of e.slides){const e=t.querySelector("marp-auto-scaling, [data-auto-scaling], [data-marp-fitting]");t.setAttribute(`${f}load`,e?"":"hideable")}}))},A=({interval:e=250}={})=>t=>{document.addEventListener("keydown",(e=>{if(" "===e.key&&e.shiftKey)t.prev();else if("ArrowLeft"===e.key||"ArrowUp"===e.key||"PageUp"===e.key)t.prev({fragment:!e.shiftKey});else if(" "!==e.key||e.shiftKey)if("ArrowRight"===e.key||"ArrowDown"===e.key||"PageDown"===e.key)t.next({fragment:!e.shiftKey});else if("End"===e.key)t.slide(t.slides.length-1,{fragment:-1});else{if("Home"!==e.key)return;t.slide(0)}else t.next();e.preventDefault()}));let n,r,o=0;t.parent.addEventListener("wheel",(a=>{let i=!1;const s=(e,t)=>{e&&(i=i||((e,t)=>((e,t)=>{const n="X"===t?"Width":"Height";return e[`client${n}`]<e[`scroll${n}`]})(e,t)&&((e,t)=>{const{overflow:n}=e,r=e[`overflow${t}`];return"auto"===n||"scroll"===n||"auto"===r||"scroll"===r})(getComputedStyle(e),t))(e,t)),e?.parentElement&&s(e.parentElement,t)};if(0!==a.deltaX&&s(a.target,"X"),0!==a.deltaY&&s(a.target,"Y"),i)return;a.preventDefault();const c=Math.sqrt(a.deltaX**2+a.deltaY**2);if(void 0!==a.wheelDelta){if(void 0===a.webkitForce&&Math.abs(a.wheelDelta)<40)return;if(a.deltaMode===a.DOM_DELTA_PIXEL&&c<4)return}else if(a.deltaMode===a.DOM_DELTA_PIXEL&&c<12)return;r&&clearTimeout(r),r=setTimeout((()=>{n=0}),e);const l=Date.now()-o<e,d=c<=n;if(n=c,l||d)return;let u;(a.deltaX>0||a.deltaY>0)&&(u="next"),(a.deltaX<0||a.deltaY<0)&&(u="prev"),u&&(t[u](),o=Date.now())}))},C=(e=`.${u}osc`)=>{const t=document.querySelector(e);if(!t)return()=>{};const n=(e,n)=>{t.querySelectorAll(`[${f}osc=${JSON.stringify(e)}]`).forEach(n)};return L()||n("fullscreen",(e=>e.style.display="none")),h||n("presenter",(e=>{e.disabled=!0,e.title="Presenter view is disabled due to restricted localStorage."})),e=>{t.addEventListener("click",(t=>{if(t.target instanceof HTMLElement){const{bespokeMarpOsc:n}=t.target.dataset;n&&t.target.blur();const r={fragment:!t.shiftKey};"next"===n?e.next(r):"prev"===n?e.prev(r):"fullscreen"===n?e?.fullscreen():"presenter"===n&&e.openPresenterView()}})),e.parent.appendChild(t),e.on("activate",(({index:t})=>{n("page",(n=>n.textContent=`Page ${t+1} of ${e.slides.length}`))})),e.on("fragment",(({index:t,fragments:r,fragmentIndex:o})=>{n("prev",(e=>e.disabled=0===t&&0===o)),n("next",(n=>n.disabled=t===e.slides.length-1&&o===r.length-1))})),e.on("marp-active",(()=>x(t,!1))),e.on("marp-inactive",(()=>x(t,!0))),L()&&(e=>{for(const t of["","webkit"])E.addEventListener(t+"fullscreenchange",e)})((()=>n("fullscreen",(e=>e.classList.toggle("exit",L()&&S())))))}},D=e=>{window.addEventListener("message",(t=>{if(t.origin!==window.origin)return;const[n,r]=t.data.split(":");if("navigate"===n){const[t,n]=r.split(",");let o=Number.parseInt(t,10),a=Number.parseInt(n,10)+1;a>=e.fragments[o].length&&(o+=1,a=0),e.slide(o,{fragment:a})}}))};var N,B,q,K,j,F,V,U={exports:{}},X=(N||(N=1,U.exports=(B=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],q=function(e){return String(e).replace(/[&<>"']/g,(function(e){return"&"+K[e]+";"}))},K={"&":"amp","<":"lt",">":"gt",'"':"quot","'":"apos"},j="dangerouslySetInnerHTML",F={className:"class",htmlFor:"for"},V={},function(e,t){var n=[],r="";t=t||{};for(var o=arguments.length;o-- >2;)n.push(arguments[o]);if("function"==typeof e)return t.children=n.reverse(),e(t);if(e){if(r+="<"+e,t)for(var a in t)!1!==t[a]&&null!=t[a]&&a!==j&&(r+=" "+(F[a]?F[a]:q(a))+'="'+q(t[a])+'"');r+=">"}if(-1===B.indexOf(e)){if(t[j])r+=t[j].__html;else for(;n.length;){var i=n.pop();if(i)if(i.pop)for(var s=i.length;s--;)n.push(i[s]);else r+=!0===V[i]?i:q(i)}r+=e?"</"+e+">":""}return V[r]=!0,r})),U.exports),H=e(X);const R=({children:e})=>H(null,null,...e),W=`${u}presenter-`,J={container:`${W}container`,dragbar:`${W}dragbar-container`,next:`${W}next`,nextContainer:`${W}next-container`,noteContainer:`${W}note-container`,noteWrapper:`${W}note-wrapper`,noteButtons:`${W}note-buttons`,infoContainer:`${W}info-container`,infoPage:`${W}info-page`,infoPageText:`${W}info-page-text`,infoPagePrev:`${W}info-page-prev`,infoPageNext:`${W}info-page-next`,noteButtonsBigger:`${W}note-bigger`,noteButtonsSmaller:`${W}note-smaller`,infoTime:`${W}info-time`,infoTimer:`${W}info-timer`},Y=e=>{const{title:t}=document;document.title="[Presenter view]"+(t?` - ${t}`:"");const n={},r=e=>(n[e]=n[e]||document.querySelector(`.${e}`),n[e]);document.body.appendChild((e=>{const t=document.createElement("div");return t.className=J.container,t.appendChild(e),t.insertAdjacentHTML("beforeend",H(R,null,H("div",{class:J.nextContainer},H("iframe",{class:J.next,src:"?view=next"})),H("div",{class:J.dragbar}),H("div",{class:J.noteContainer},H("div",{class:J.noteWrapper}),H("div",{class:J.noteButtons},H("button",{class:J.noteButtonsSmaller,tabindex:"-1",title:"Smaller notes font size"},"Smaller notes font size"),H("button",{class:J.noteButtonsBigger,tabindex:"-1",title:"Bigger notes font size"},"Bigger notes font size"))),H("div",{class:J.infoContainer},H("div",{class:J.infoPage},H("button",{class:J.infoPagePrev,tabindex:"-1",title:"Previous"},"Previous"),H("span",{class:J.infoPageText}),H("button",{class:J.infoPageNext,tabindex:"-1",title:"Next"},"Next")),H("time",{class:J.infoTime,title:"Current time"}),H("time",{class:J.infoTimer,title:"Timer"})))),t})(e.parent)),(e=>{let t=!1;r(J.dragbar).addEventListener("mousedown",(()=>{t=!0,r(J.dragbar).classList.add("active")})),window.addEventListener("mouseup",(()=>{t=!1,r(J.dragbar).classList.remove("active")})),window.addEventListener("mousemove",(e=>{if(!t)return;const n=e.clientX/document.documentElement.clientWidth*100;r(J.container).style.setProperty("--bespoke-marp-presenter-split-ratio",`${Math.max(0,Math.min(100,n))}%`)})),r(J.nextContainer).addEventListener("click",(()=>e.next()));const n=r(J.next),o=(a=n,(e,t)=>a.contentWindow?.postMessage(`navigate:${e},${t}`,"null"===window.origin?"*":window.origin));var a;n.addEventListener("load",(()=>{r(J.nextContainer).classList.add("active"),o(e.slide(),e.fragmentIndex),e.on("fragment",(({index:e,fragmentIndex:t})=>o(e,t)))}));const i=document.querySelectorAll(".bespoke-marp-note");i.forEach((e=>{e.addEventListener("keydown",(e=>e.stopPropagation())),r(J.noteWrapper).appendChild(e)})),e.on("activate",(()=>i.forEach((t=>t.classList.toggle("active",t.dataset.index==e.slide())))));let s=0;const c=e=>{s=Math.max(-5,s+e),r(J.noteContainer).style.setProperty("--bespoke-marp-note-font-scale",(1.2**s).toFixed(4))},l=()=>c(1),d=()=>c(-1),u=r(J.noteButtonsBigger),f=r(J.noteButtonsSmaller);u.addEventListener("click",(()=>{u.blur(),l()})),f.addEventListener("click",(()=>{f.blur(),d()})),document.addEventListener("keydown",(e=>{"+"===e.key&&l(),"-"===e.key&&d()}),!0),e.on("activate",(({index:t})=>{r(J.infoPageText).textContent=`${t+1} / ${e.slides.length}`}));const m=r(J.infoPagePrev),g=r(J.infoPageNext);m.addEventListener("click",(t=>{m.blur(),e.prev({fragment:!t.shiftKey})})),g.addEventListener("click",(t=>{g.blur(),e.next({fragment:!t.shiftKey})})),e.on("fragment",(({index:t,fragments:n,fragmentIndex:r})=>{m.disabled=0===t&&0===r,g.disabled=t===e.slides.length-1&&r===n.length-1}));let p=new Date;const v=()=>{const e=new Date,t=e=>`${Math.floor(e)}`.padStart(2,"0"),n=e.getTime()-p.getTime(),o=t(n/1e3%60),a=t(n/1e3/60%60),i=t(n/36e5%24);r(J.infoTime).textContent=e.toLocaleTimeString(),r(J.infoTimer).textContent=`${i}:${a}:${o}`};v(),setInterval(v,250),r(J.infoTimer).addEventListener("click",(()=>{p=new Date}))})(e)},z=e=>{if(!(e=>e.syncKey&&"string"==typeof e.syncKey)(e))throw new Error("The current instance of Bespoke.js is invalid for Marp bespoke presenter plugin.");Object.defineProperties(e,{openPresenterView:{enumerable:!0,value:G},presenterUrl:{enumerable:!0,get:Q}}),h&&document.addEventListener("keydown",(t=>{"p"!==t.key||t.altKey||t.ctrlKey||t.metaKey||(t.preventDefault(),e.openPresenterView())}))};function G(){const{max:e,floor:t}=Math,n=e(t(.85*window.innerWidth),640),r=e(t(.85*window.innerHeight),360);return window.open(this.presenterUrl,W+this.syncKey,`width=${n},height=${r},menubar=no,toolbar=no`)}function Q(){const e=new URLSearchParams(location.search);return e.set("view","presenter"),e.set("sync",this.syncKey),m(e)}const Z=e=>{const t=g();return t===l&&e.appendChild(document.createElement("span")),{[s]:z,[c]:Y,[l]:D}[t]},ee=e=>{e.on("activate",(t=>{document.querySelectorAll(".bespoke-progress-parent > .bespoke-progress-bar").forEach((n=>{n.style.flexBasis=100*t.index/(e.slides.length-1)+"%"}))}))},te=e=>{const t=Number.parseInt(e,10);return Number.isNaN(t)?null:t},ne=(e={})=>{const t={history:!0,...e};return e=>{let n=!0;const r=e=>{const t=n;try{return n=!0,e()}finally{n=t}},o=(t={fragment:!0})=>{let n=t.fragment?te(p("f")||""):null;((t,n)=>{const{min:r,max:o}=Math,{fragments:a,slides:i}=e,s=o(0,r(t,i.length-1)),c=o(0,r(n||0,a[s].length-1));s===e.slide()&&c===e.fragmentIndex||e.slide(s,{fragment:c})})((()=>{if(location.hash){const[t]=location.hash.slice(1).split(":~:");if(/^\d+$/.test(t))return(te(t)??1)-1;const r=document.getElementById(t)||document.querySelector(`a[name="${CSS.escape(t)}"]`);if(r){const{length:t}=e.slides;for(let o=0;o<t;o+=1)if(e.slides[o].contains(r)){const t=e.fragments?.[o],a=r.closest("[data-marpit-fragment]");if(t&&a){const e=t.indexOf(a);e>=0&&(n=e)}return o}}}return 0})(),n)};e.on("fragment",(({index:e,fragmentIndex:r})=>{n||v({f:0===r||r.toString()},{location:{...location,hash:`#${e+1}`},setter:(...e)=>t.history?history.pushState(...e):history.replaceState(...e)})})),setTimeout((()=>{o(),window.addEventListener("hashchange",(()=>r((()=>{o({fragment:!1}),v({f:void 0})})))),window.addEventListener("popstate",(()=>{n||r((()=>o()))})),n=!1}),0)}},re=(e={})=>{const t=e.key||window.history.state?.marpBespokeSyncKey||Math.random().toString(36).slice(2),n=`bespoke-marp-sync-${t}`;var r;r={marpBespokeSyncKey:t},v({},{setter:(e,...t)=>i({...e,...r},...t)});const o=()=>{const e=y(n);return e?JSON.parse(e):Object.create(null)},a=e=>{const t=o(),r={...t,...e(t)};return b(n,JSON.stringify(r)),r},s=()=>{window.removeEventListener("pageshow",s),a((e=>({reference:(e.reference||0)+1})))};return e=>{s(),Object.defineProperty(e,"syncKey",{value:t,enumerable:!0});let r=!0;setTimeout((()=>{e.on("fragment",(e=>{r&&a((()=>({index:e.index,fragmentIndex:e.fragmentIndex})))}))}),0),window.addEventListener("storage",(t=>{if(t.key===n&&t.oldValue&&t.newValue){const n=JSON.parse(t.oldValue),o=JSON.parse(t.newValue);if(n.index!==o.index||n.fragmentIndex!==o.fragmentIndex)try{r=!1,e.slide(o.index,{fragment:o.fragmentIndex,forSync:!0})}finally{r=!0}}}));const i=()=>{const{reference:e}=o();void 0===e||e<=1?w(n):a((()=>({reference:e-1})))};window.addEventListener("pagehide",(e=>{e.persisted&&window.addEventListener("pageshow",s),i()})),e.on("destroy",i)}},{PI:oe,abs:ae,sqrt:ie,atan2:se}=Math,ce={passive:!0},le=({slope:e=-.7,swipeThreshold:t=30}={})=>n=>{let r;const o=n.parent,a=e=>{const t=o.getBoundingClientRect();return{x:e.pageX-(t.left+t.right)/2,y:e.pageY-(t.top+t.bottom)/2}};o.addEventListener("touchstart",(({touches:e})=>{r=1===e.length?a(e[0]):void 0}),ce),o.addEventListener("touchmove",(e=>{if(r)if(1===e.touches.length){e.preventDefault();const t=a(e.touches[0]),n=t.x-r.x,o=t.y-r.y;r.delta=ie(ae(n)**2+ae(o)**2),r.radian=se(n,o)}else r=void 0})),o.addEventListener("touchend",(o=>{if(r){if(r.delta&&r.delta>=t&&r.radian){const t=(r.radian-e+oe)%(2*oe)-oe;n[t<0?"next":"prev"](),o.stopPropagation()}r=void 0}}),ce)},de=new Map;de.clear(),de.set("none",{backward:{both:void 0,incoming:void 0,outgoing:void 0},forward:{both:void 0,incoming:void 0,outgoing:void 0}});const ue={both:"",outgoing:"outgoing-",incoming:"incoming-"},fe={forward:"",backward:"-backward"},me=e=>`--marp-bespoke-transition-animation-${e}`,ge=e=>`--marp-transition-${e}`,pe=me("name"),ve=me("duration"),he=e=>new Promise((t=>{const n={},r=document.createElement("div"),o=e=>{r.remove(),t(e)};r.addEventListener("animationstart",(()=>o(n))),Object.assign(r.style,{animationName:e,animationDuration:"1s",animationFillMode:"both",animationPlayState:"paused",position:"absolute",pointerEvents:"none"}),document.body.appendChild(r);const a=getComputedStyle(r).getPropertyValue(ge("duration"));a&&(n.defaultDuration=a),((e,t)=>{requestAnimationFrame((()=>{e.style.animationPlayState="running",requestAnimationFrame((()=>t(void 0)))}))})(r,o)})),ye=async e=>de.has(e)?de.get(e):(e=>{const t={},n=[];for(const[r,o]of Object.entries(ue))for(const[a,i]of Object.entries(fe)){const s=`marp-${o}transition${i}-${e}`;n.push(he(s).then((e=>{t[a]=t[a]||{},t[a][r]=e?{...e,name:s}:void 0})))}return Promise.all(n).then((()=>t))})(e).then((t=>(de.set(e,t),t))),be=e=>Object.values(e).flatMap(Object.values).every((e=>!e)),we=(e,{type:t,backward:n})=>{const r=e[n?"backward":"forward"],o=(()=>{const e=r[t],n=e=>({[pe]:e.name});if(e)return n(e);if(r.both){const e=n(r.both);return"incoming"===t&&(e[me("direction")]="reverse"),e}})();return!o&&n?we(e,{type:t,backward:!1}):o||{[pe]:"__bespoke_marp_transition_no_animation__"}},xe=e=>{if(e)try{const t=JSON.parse(e);if((e=>{if("object"!=typeof e)return!1;const t=e;return"string"==typeof t.name&&(void 0===t.duration||"string"==typeof t.duration)})(t))return t}catch{}},ke="_tSId",$e="_tA",Ee="bespoke-marp-transition-warming-up",Le=window.matchMedia("(prefers-reduced-motion: reduce)"),Se="__bespoke_marp_transition_reduced_outgoing__",Pe="__bespoke_marp_transition_reduced_incoming__",_e={forward:{both:void 0,incoming:{name:Pe},outgoing:{name:Se}},backward:{both:void 0,incoming:{name:Pe},outgoing:{name:Se}}},Te=e=>{if(!document.startViewTransition)return;const t=t=>(void 0!==t&&(e._tD=t),e._tD);let n;t(!1),((...e)=>{const t=[...new Set(e).values()];return Promise.all(t.map((e=>ye(e)))).then()})(...Array.from(document.querySelectorAll("section[data-transition], section[data-transition-back]")).flatMap((e=>[e.dataset.transition,e.dataset.transitionBack].flatMap((e=>{const t=xe(e);return[t?.name,t?.builtinFallback?`__builtin__${t.name}`:void 0]})).filter((e=>!!e))))).then((()=>{document.querySelectorAll("style").forEach((e=>{e.innerHTML=e.innerHTML.replace(/--marp-transition-duration:[^;}]*[;}]/g,(e=>e.slice(0,-1)+"!important"+e.slice(-1)))}))}));const r=(n,{back:r,cond:o})=>a=>{const i=t();if(i)return!!a[$e]||!("object"!=typeof i||(i.skipTransition(),!a.forSync));if(!o(a))return!0;const s=e.slides[e.slide()],c=()=>a.back??r,l="data-transition"+(c()?"-back":""),d=s.querySelector(`section[${l}]`);if(!d)return!0;const u=xe(d.getAttribute(l)??void 0);return!u||((async(e,{builtinFallback:t=!0}={})=>{let n=await ye(e);if(be(n)){if(!t)return;return n=await ye(`__builtin__${e}`),be(n)?void 0:n}return n})(u.name,{builtinFallback:u.builtinFallback}).then((e=>{if(!e){t(!0);try{n(a)}finally{t(!1)}return}let r=e;Le.matches&&(console.warn("Use a constant animation to transition because preferring reduced motion by viewer has detected."),r=_e);const o=document.getElementById(ke);o&&o.remove();const i=document.createElement("style");i.id=ke,document.head.appendChild(i),((e,t)=>{const n=[`:root{${ge("direction")}:${t.backward?-1:1};}`,":root:has(.bespoke-marp-inactive){cursor:none;}"],r=t=>{const n=e[t].both?.defaultDuration||e[t].outgoing?.defaultDuration||e[t].incoming?.defaultDuration;return"forward"===t?n:n||r("forward")},o=t.duration||r(t.backward?"backward":"forward");void 0!==o&&n.push(`::view-transition-group(*){${ve}:${o};}`);const a=e=>Object.entries(e).map((([e,t])=>`${e}:${t};`)).join("");return n.push(`::view-transition-old(root){${a(we(e,{...t,type:"outgoing"}))}}`,`::view-transition-new(root){${a(we(e,{...t,type:"incoming"}))}}`),n})(r,{backward:c(),duration:u.duration}).forEach((e=>i.sheet?.insertRule(e)));const s=document.documentElement.classList;s.add(Ee);let l=!1;const d=()=>{l||(n(a),l=!0,s.remove(Ee))},f=()=>{t(!1),i.remove(),s.remove(Ee)};try{t(!0);const e=document.startViewTransition(d);t(e),e.finished.finally(f)}catch(e){console.error(e),d(),f()}})),!1)};e.on("prev",r((t=>e.prev({...t,[$e]:!0})),{back:!0,cond:e=>e.index>0&&!((e.fragment??1)&&n.fragmentIndex>0)})),e.on("next",r((t=>e.next({...t,[$e]:!0})),{cond:t=>t.index+1<e.slides.length&&!(n.fragmentIndex+1<n.fragments.length)})),setTimeout((()=>{e.on("slide",r((t=>e.slide(t.index,{...t,[$e]:!0})),{cond:t=>{const n=e.slide();return t.index!==n&&(t.back=t.index<n,!0)}}))}),0),e.on("fragment",(e=>{n=e}))};let Ie;const Me=()=>(void 0===Ie&&(Ie="wakeLock"in navigator&&navigator.wakeLock),Ie),Oe=async()=>{const e=Me();if(e)try{return await e.request("screen")}catch(e){console.warn(e)}return null},Ae=async()=>{if(!Me())return;let e;const t=()=>{e&&"visible"===document.visibilityState&&Oe()};for(const e of["visibilitychange","fullscreenchange"])document.addEventListener(e,t);return e=await Oe(),e};((e=document.getElementById(":$p"))=>{(()=>{const e=p("view");a.dataset.bespokeView=e===l||e===c?e:""})();const t=(e=>{const t=p(e);return v({[e]:void 0}),t})("sync")||void 0;o.from(e,((...e)=>{const t=d.findIndex((e=>g()===e));return e.map((([e,n])=>e[t]&&n)).filter((e=>e))})([[1,1,0],re({key:t})],[[1,1,1],Z(e)],[[1,1,0],M],[[1,1,1],k],[[1,0,0],T()],[[1,1,1],O],[[1,1,1],ne({history:!1})],[[1,1,0],A()],[[1,1,0],P],[[1,0,0],ee],[[1,1,0],le()],[[1,0,0],C()],[[1,0,0],Te],[[1,1,1],$],[[1,1,0],Ae]))})()}();</script></body></html>